---
title: 顧客の生涯価値 (CLV) の予測
description: 将来のアクティブな顧客の潜在的な収益を予測します。
ms.date: 02/05/2021
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: how-to
author: m-hartmann
ms.author: wameng
manager: shellyha
searchScope:
- ci-predictions
- ci-create-prediction
- ci-custom-models
- customerInsights
ms.openlocfilehash: 3e1b1ce00eeda1cead9ba05beae65b6903d0b9cf
ms.sourcegitcommit: b7dbcd5627c2ebfbcfe65589991c159ba290d377
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/27/2022
ms.locfileid: "8647348"
---
# <a name="customer-lifetime-value-clv-prediction"></a>顧客の生涯価値 (CLV) の予測

個々のアクティブな顧客が定義済みの将来の期間を通じてビジネスにもたらす潜在的な価値 (収益) を予測します。 この機能は、さまざまな目標を達成するのに役立ちます。 
- 価値の高い顧客を特定し、このインサイトを処理します
- 潜在的な価値に基づいて戦略的な顧客セグメントを作成し、ターゲットを絞った営業、マーケティング、およびサポートの取り組みでパーソナライズされたキャンペーンを実行します
- 顧客価値を高める機能に焦点を当てて製品開発をガイドします
- 営業またはマーケティング戦略を最適化し、顧客アウトリーチのためにより正確に予算を割り当てます
- ロイヤルティ プログラムまたはリワード プログラムを通じて、価値の高い顧客を特定して報酬を提供します 

## <a name="prerequisites"></a>前提条件

始める前に、CLV がビジネスにとって何を意味するかを考えてください。 現在、トランザクション ベースの CLV 予測をサポートしています。 顧客の予測値は、ビジネス トランザクションの履歴に基づいています。 予測を作成するには、少なくとも[共同作成者](permissions.md)アクセス許可が必要です。

CLV モデルの構成と実行にはそれほど時間がかからないため、さまざまな入力設定で複数のモデルを作成し、モデルの結果を比較して、ビジネス ニーズに最適なモデル シナリオを確認することを検討してください。

###  <a name="data-requirements"></a>データ要件

次のデータが必要です。オプションとしてマークされている場合、モデルのパフォーマンスを向上させるために推奨されます。 モデルが処理できるデータが多いほど、予測がより正確になります。 したがって、可能な場合は、より多くの顧客活動データを取り込むことをお勧めします。

- 顧客識別子: トランザクションを個々の顧客に照合するための一意識別子

- トランザクション履歴: 以下のセマンティック データ スキーマを含む履歴トランザクション ログ
    - **トランザクション ID**: 各トランザクションの一意識別子
    - **トランザクションの日付**: 日付、可能であれば各トランザクションのタイムスタンプ
    - **トランザクション金額**: 各トランザクションの金銭的価値 (売上や利益率など)
    - **返品に割り当てられたラベル** (オプション): トランザクションが返品であるかどうかを示すブール値 
    - **製品 ID** (オプション): トランザクションに関係する製品の製品 ID

- たとえば、追加データ (オプション)
    - Web アクティビティ: Web サイトの訪問履歴、メール履歴
    - ロイヤルティ活動: ロイヤルティ リワード ポイントの発生と引き換え履歴
    - 顧客サービス ログ、サービス コール、苦情、または返品履歴
- 顧客活動に関するデータ (オプション):
    - 同じ種類の活動を区別する活動識別子
    - 活動を顧客にマッピングする顧客識別子
    - 活動の名前と日付を含む活動情報
    - 活動のセマンティック データ スキーマには、次のものが含まれます。 
        - **主キー**: アクティビティの一意識別子
        - **タイムスタンプ**: 主キーで識別されるイベントの日時
        - **イベント (活動名)**: 使用するイベントの名前
        - **詳細 (金額または値)**: 顧客活動に関する詳細

- 推奨されるデータ特性:
    - 十分な履歴データ: 少なくとも 1 年間のトランザクション データ。 1 年間の CLV を予測するには、2 年から 3 年分のトランザクション データが望ましい。
    - 顧客ごとの複数の購入: 可能であれば複数の日付で、理想的には顧客 ID ごとに少なくとも 2 件 から 3 件のトランザクション。
    - 顧客数: 少なくとも 100 人の一意の顧客、10,000 人を超える顧客が望ましい。 モデルは、顧客が 100 人未満で、履歴データが不十分な場合に失敗します
    - データの完全性: 入力データの必須フィールドで不足値が 20% 未満   

> [!NOTE]
> - このモデルには、顧客のトランザクション履歴が必要です。 現在構成できるトランザクション履歴エンティティは 1 つだけです。 複数の購入/トランザクション エンティティがある場合は、データ インジェストの前に Power Query で結合できます。
> - ただし、追加の顧客活動データ (オプション) の場合は、モデルで検討するために必要な数の顧客活動エンティティを追加できます。

## <a name="create-a-customer-lifetime-value-prediction"></a>顧客の生涯価値の予測を作成する

1. **インテリジェンス** > **予測** に移動します。

1. **顧客生涯価値** タイルを選択して、**モデルを使用する** を選択します。 

1. **顧客の生涯価値** ペインで、**開始する** を選択します。

1. 他のモデルまたはエンティティと区別するための **このモデルに名前を付ける** と **出力エンティティ名**。

1. **次へ** を選択します。

### <a name="define-model-preferences"></a>モデルの基本設定を定義する

1. **予測期間** を設定して、CLV を予測する期間を定義します。    
   既定では、単位は月に設定されています。 さらに将来の期間を延長するには、年に変更することができます。

   > [!TIP]
   > 設定した期間の CLV を正確に予測するには、同等の期間の履歴データが必要です。 たとえば、今後 12 か月間の CLV を予測する場合は、少なくとも 18 - 24 か月の履歴データを用意することをお勧めします。

1. **アクティブな顧客** がビジネスにとってどのような意味を持つかを指定します。 顧客をアクティブと見なすには、少なくとも 1 件のトランザクションが必要である概算時間を設定します。 このモデルは、アクティブな顧客の CLV のみを予測します。 
   - **モデルで購入間隔を計算する (推奨)**: モデルはデータを分析し、過去の購入に基づいて期間を決定します。
   - **間隔を手動で設定する**: アクティブな顧客の特定のビジネス定義がある場合、このオプションを選択し、それに応じて期間を設定します。

1. **価値の高い顧客** のパーセンタイルを定義して、モデルがビジネス定義に適合する結果を提供できるようにします。
    - **モデル計算 (推奨)**: モデルはデータを分析し、顧客のトランザクション履歴に基づいて、ビジネスにとって価値の高い顧客が何かを判断します。 このモデルは、ヒューリスティック ルール (80/20 ルールまたはパレートの法則に触発された) を使用して、価値の高い顧客の割合を見つけます。 過去の期間にビジネスの累積収益の 80% に貢献した顧客の割合は、価値の高い顧客と見なされます。 通常、30〜40% 未満の顧客は 80% の累積収益に貢献しています。 ただし、この数はビジネスや業界によって異なる場合があります。    
    - **アクティブな顧客 (上位 %)**: ビジネスにとって価値の高い顧客を、最もアクティブな有料顧客のパーセンタイルとして定義します。 たとえば、このオプションを使用して、価値の高い顧客を将来の有料顧客の上位 20% として定義できます。

    ビジネスが別の方法で価値の高い顧客を定義している場合、[ぜひお知らせください](https://go.microsoft.com/fwlink/?linkid=2074172)。

1. **次へ** を選択して、次のステップに進みます。

### <a name="add-required-data"></a>必須データの追加

1. **必須データ** ステップで、**顧客購入履歴** に対して **データを追加** を選択し、[前提条件](#prerequisites)に記載されているように、トランザクション/購入履歴情報を提供するエンティティを選択します。

1. セマンティック フィールドを購入履歴エンティティ内の属性にマップし、**次へ** を選択します。

   :::image type="content" source="media/clv-add-customer-data-mapping.png" alt-text="必要なデータに対してデータ属性をマッピングするための構成ステップの画像。":::
 
1. 以下のフィールドが入力されていない場合は、購入履歴エンティティから *顧客* エンティティへの関係を構成して、**保存** を選択します。
    1. トランザクション履歴エンティティ を選択します。
    1. 購入履歴エンティティで顧客を識別するフィールドを選択します。 これは、顧客エンティティの主要な顧客 ID に関連している必要があります。
    1. 主要な顧客エンティティに一致するエンティティを選択します。
    1. 関係性を説明する名前を入力します。

      :::image type="content" source="media/clv-add-customer-data-relationship.png" alt-text="顧客エンティティとの関係を定義するための構成ステップの画像。":::

1. **次へ** を選択します。

### <a name="add-optional-data"></a>オプション データを追加する

主要な顧客と対話を反映するデータ (Web、顧客サービス、イベント ログなど) は、トランザクション レコードにコンテキストを追加します。 顧客活動データのパターンが多いほど、予測の精度を向上させることができます。 

1. **追加データ (オプション)** ステップで、**データを追加する** を選択します。 [前提条件](#prerequisites)に記載されているように、顧客活動情報を提供するエンティティを選択します。

1. セマンティック フィールドを顧客活動エンティティ内の属性にマップし、**次へ** を選択します。

   :::image type="content" source="media/clv-additional-data-mapping.png" alt-text="追加データに対してフィールドをマッピングするための構成ステップの画像。":::

1. 追加する顧客活動の種類に一致する活動の種類を選択します。 既存の活動の種類から選択するか、新しい活動の種類を追加します。

1. 顧客活動エンティティから *顧客* エンティティへの関係を構成します。
    
    1. 顧客活動テーブルで顧客を識別する フィールドを選択します。 これは、*顧客* エンティティのプライマリ 顧客 ID に直接関連付けることができます。
    1. 主要な *顧客* エンティティと一致する *顧客* エンティティを選択します。
    1. 関係性を説明する名前を入力します。

   :::image type="content" source="media/clv-additional-data.png" alt-text="データを追加し、入力された例を使用して活動を構成するための構成フローのステップの画像。":::

1. **保存** を選択します。    
    含めたい他の顧客活動がある場合は、さらにデータを追加します。

1. **次へ** を選択します。

### <a name="set-update-schedule"></a>スケジュールの更新を設定する

1. **データ更新スケジュール** ステップで、最新のデータに基づいてモデルを再トレーニングする頻度を選択します。 この設定は、Customer Insights に関するインサイトに新しいデータが取り込まれる際に、予測精度を更新するために重要です。 多くの企業は、月に1度再トレーニングして、予測の精度を高めることができます。

1. **次へ** を選択します。

### <a name="review-and-run-the-model-configuration"></a>モデル構成を確認して実行します

1. **モデルの詳細を確認します** ステップで、予測の構成を検証します。 表示された値の配下の **編集する** を選択して、予測の構成の任意の部分に戻ることができます。 進行状況のインジケーターから構成ステップを選択することもできます。

1. すべての値が正しく構成されている場合は、**保存して実行** を選択して、モデルの実行を開始します。 **自分の予測** タブで、予測プロセスのステータスを確認できます。 予測で使用されるデータの量によっては、プロセスの完了までに数時間かかる場合があります。

## <a name="review-prediction-status-and-results"></a>予測の状態と結果のレビュー

### <a name="review-prediction-status"></a>予測ステータスをレビューする

1.  **インテリジェンス** > **予測** に移動し、**自分の予測** タブを選択します。
2.  レビューする予測を選択します。

- **予測名**: 作成時に提供された予測の名前。
- **予測の種類**: 予測に使用されるモデルの種類
- **出力エンティティ**: 予測の結果を保管するエンティティの名前。 **データ** > **エンティティ** に移動して、この名前のエンティティを検索します。
- **予測フィールド**: このフィールドは、一部の種類の予測に対してのみ入力され、顧客の生涯価値では使用されません。
- **状態**: 予測実行の状態。
    - **キュー**: 予測は、他のプロセスが完了されるのを待っています。
    - **更新**: 予測は現在、実行されており、出力エンティティに流れ込む結果を作成します。
    - **失敗**: 予測の実行に失敗しました。 詳細については、[ログを確認](manage-predictions.md#troubleshoot-a-failed-prediction) します。
    - **成功**: 予測は成功しました。 縦の省略記号の下で **表示** を選択して、予測の結果を確認します。
- **編集日**: 予測の構成が変更された日付。
- **最終更新日**: 予測結果が出力エンティティで更新された日付。

### <a name="review-prediction-results"></a>予測の結果をレビューする

1. **インテリジェンス** > **予測** に移動し、**自分の予測** タブを選択します。

1. 結果をレビューする予測を選択します。

結果ページには、3 つの主要なデータ セクションがあります。

- **トレーニング モデルのパフォーマンス**: A、B、または C が可能なグレードです。 このグレードは、予測のパフォーマンスを示し、出力エンティティに保管されている結果を使用するかどうかを決定するのに役立ちます。 **このスコアの詳細** を選択して、基礎となるモデルのパフォーマンス メトリックと、最終的なモデルのパフォーマンス グレードがどのように導き出されたかの理解を深めます。
  
  :::image type="content" source="media/clv-model-score.png" alt-text="グレード A のモデル スコア情報ボックスの画像。":::

  予測の構成中に提供された価値の高い顧客の定義を使用して、システムは、ベースライン モデルと比較して価値の高い顧客を予測する際に AI モデルがどのように機能したかを評価します。    

  グレードは次のルールに基づいて決定されます。
  - モデルが価値の高い顧客を正確に予測した割合が、ベースライン モデルより少なくとも 5% 上回る場合は **A**。
  - モデルが価値の高い顧客を正確に予測した割合が、ベースライン モデルより 0 - 5% 高い場合は **B**。
  - モデルが価値の高い顧客を正確に予測した割合がベースライン モデルより低い場合は **C**。

  **モデルの評価** ペインには、AI モデルのパフォーマンスとベースライン モデルに関する詳細が表示されます。 ベースライン モデルは、非 AI ベースのアプローチを使用して、主に顧客による過去の購入に基づいて顧客生涯価値を計算します。     
  ベースライン モデルによる CLV の計算に使用される標準式:    

  _**各顧客の CLV** = アクティブな顧客ウィンドウで顧客が行った平均月間購入 * CLV 予測期間の月数 * すべての顧客の全体的な保持率*_

  AI モデルは、2 つのモデルパフォーマンス メトリックに基づいてベースライン モデルと比較されます。
  
  - **価値の高い顧客の予測を行う際の成功率**

    AI モデルを使用して、ベースライン モデルと比較したときの、価値の高い顧客を予測する際の違いを確認してください。 たとえば、成功率 84% は、トレーニング データ内のすべての価値の高い顧客のうち、AI モデルが 84% を正確にキャプチャできたことを意味します。 次に、この成功率をベースライン モデルの成功率と比較して、相対的な変化を報告します。 この値は、モデルにグレードを割り当てるために使用されます。

  - **エラー指標**
    
    別のメトリックを使用すると、将来の値を予測する際のエラーの観点からモデルの全体的なパフォーマンスを確認できます。 このエラーを評価するために、全体的な二乗平均平方根誤差 (RMSE) メトリックを使用します。 RMSE は、定量的データを予測する際のモデルの誤差を測定するための標準的な方法です。 AI モデルの RMSE がベースライン モデルの RMSE と比較され、相対的な差異が報告されます。

  AI モデルは、顧客がビジネスにもたらす価値に応じて、顧客の正確なランキングを優先します。 したがって、価値の高い顧客を予測する成功率のみを使用して、最終的なモデルのグレードを導き出します。 RMSE メトリックは、外れ値に敏感です。 購入額が非常に高い顧客の割合が少ないシナリオでは、全体的な RMSE メトリックがモデルのパフォーマンスの全体像を示していない可能性があります。   

- **パーセンタイルごとの顧客の値**: 価値の高い顧客の定義を使用して、顧客は CLV 予測に基づいて価値の低い顧客と価値の高い顧客にグループ化され、グラフに表示されます。 ヒストグラムのバーにカーソルを合わせると、各グループの顧客数とそのグループの平均 CLV を確認できます。 このデータは、CLV 予測に基づいて[顧客のセグメントを作成する](segments.md)際に有用です。

- **最も影響力の大きい係数**: AI モデルに提供された入力データに基づいて CLV 予測を作成する際には、さまざまな係数が考慮されます。 各要素の重要度は、モデルが作成する集約された予測に対して計算されます。 これらの係数を使用すると、予測結果を検証するのに役立ちます。 これらの係数が、すべての顧客の CLV の予測に貢献した最も影響の大きい係数について提供するインサイトも増加します。

## <a name="manage-predictions"></a>予測の管理

予測を最適化、トラブルシューティング、更新、または削除することができます。 入力データのユーザビリティ レポートを確認して、予測をより高速で信頼性の高いものにする方法を見つけます。 詳細については、[予測の管理](manage-predictions.md) を参照してください。

[!INCLUDE [footer-include](includes/footer-banner.md)]
