---
title: 製品レコメンデーションの予測
description: 顧客が購入またはやり取りする可能性のある製品を予測します。
ms.date: 01/13/2022
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: conceptual
author: wmelewong
ms.author: wameng
manager: shellyha
ms.openlocfilehash: fe6c0e8ba8236243682a4105535a0026c4343c3d
ms.sourcegitcommit: b7dbcd5627c2ebfbcfe65589991c159ba290d377
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/27/2022
ms.locfileid: "8647355"
---
# <a name="product-recommendation-prediction"></a>製品レコメンデーションの予測

製品レコメンデーション モデルは、予測製品レコメンデーションのセットを作成します。 レコメンデーションは、以前の購入行動と同様の購入パターンを持つ顧客に基づいています。 **インテリジェンス** > **予測** ページで、新しい製品レコメンデーション予測を作成できます。 作成済みの予測を確認するには、**自分の予測** を選択します。

製品レコメンデーションは、現地の法律や規制、および顧客の期待に左右される場合がありますが、モデルは特に考慮に入れるよう構築されていません。  この予測機能のユーザーとして、**レコメンデーションを顧客に提供する前に確認して**、適用される法律や規制、および推奨する対象である顧客の期待に準拠していることを確認する必要があります。 

さらに、このモデルの出力は、製品 ID に基づいたレコメンデーションを提供します。 配信メカニズムでは、予測された製品 ID を顧客に適したコンテンツにマップして、ローカリゼーション、画像コンテンツ、およびその他のビジネス固有のコンテンツや動作を説明する必要があります。

## <a name="sample-guide"></a>サンプル ガイド

この機能を試すことに興味があるが、以下の要件を満たすためのデータがない場合は、[サンプル実装を作成する](sample-guide-predict-product-recommendation.md)ことができます。

## <a name="prerequisites"></a>前提条件

- 少なくとも Customer Insights の[共同作成者権限](permissions.md) があること。

- ビジネスのためのさまざまなタイプの製品と、顧客がそれらをどのように操作するかを理解するためのビジネス知識。 以前に顧客が購入した製品または新製品のレコメンデーションをサポートします。

- トランザクション、購入、その履歴に関するデータ:
    - 購入またはトランザクションを区別するためのトランザクション識別子。
    - トランザクションを顧客にマッピングするための顧客 ID。
    - トランザクションが発生した日付を指定するトランザクション イベント日付。
    - トランザクションの製品 ID 情報。
    - (オプション) 製品フィルターを使用する製品カタログ データ エンティティ。
    - (オプション) トランザクションが返品であるかどうか。
    - セマンティック データ スキーマには、次の情報が必要です:
        - **トランザクション ID:** 購入またはトランザクションの一意識別子。
        - **トランザクションの日付:** 購入またはトランザクションの日付。
        - **トランザクションの値:** 購入またはトランザクションの数値。
        - **一意の製品 ID:** データが品目レベルの場合に購入した製品またはサービスの ID。
        - (オプション) **購入または返品:** トランザクションが返品だったことを値 *true* で識別するブール値フィールド。 購入または返品データがモデルに指定されておらず、**トランザクションの価値** がマイナスの場合、この情報を使用して返品を推測します。
- 推奨されるデータ特性:
    - 十分な履歴データ: 少なくとも 1 年間のトランザクション データ、季節性を含める場合は 2 - 3 年が望ましい。
    - 顧客ごとの複数の購入: 顧客 ID ごとに 3 つ以上のトランザクション
    - 顧客数: 少なくとも 100 人の顧客、10,000 人を超える顧客が望ましい。 モデルは、100 人未満の顧客では失敗します。

> [!NOTE]
> - このモデルには、顧客のトランザクション履歴が必要です。 トランザクションの定義は非常に柔軟です。 ユーザーと製品の相互作用を記述するデータは、入力として機能します。 たとえば、製品の購入、クラスの受講、イベントへの参加などです。
> - 現在構成できるトランザクション履歴エンティティは 1 つだけです。 複数の購入エンティティがある場合は、データ インジェストの前に Power Query で結合します。
> - 注文と注文の詳細が異なるエンティティである場合は、モデルで使用する前に結合します。 モデルは、エンティティ内の注文 ID またはレシート ID のみでは機能しません。


## <a name="create-a-product-recommendation-prediction"></a>製品レコメンデーション予測を作成する

1. Customer Insights で、**インテリジェンス** > **予測** に移動します。

1. **製品推奨モデル** タイルをを選択し、**このモデルを使用する** を選択します。
   > [!div class="mx-imgBorder"]
   > ![[このモデルを使用]ボタンを使用した製品レコメンデーション モデル タイル。](media/product-recommendation-usethismodel.PNG "[このモデルを使用]ボタンを使用した製品レコメンデーション モデル タイル")

1. モデル要件に関する情報をレビューします。 必要なデータがある場合は、**開始する** を選択します。

### <a name="name-model"></a>モデルに名前を付ける

1. モデルにはその他と区別できるような名前を付けてください。

1. スペースを入れずに、文字と数字のみを使用して出力エンティティの名前を入力します。 この名前を、モデル エンティティが使用します。 続いて、**次へ** を選択します。

### <a name="define-product-recommendation-configuration"></a>製品レコメンデーション構成を定義する

1. 顧客に推薦する **製品数** を設定します。 この値は、配信方法がデータをどのように入力するかによって異なります。 3 つの製品を推奨できる場合、それに応じてこの値を設定します。
   
   >[!TIP]
   > いつでも **下書きを保存** を選択して予測をドラフトとして保存できます。 ドラフト予測は **自分の予測** タブに表示されます。

1. 顧客が **期待される再購入** フィールドで最近購入した製品を含めるかどうかを選択します。

1. **ルック バック ウィンドウ** を設定する。 この設定は、モデルが製品をユーザーに再度推奨する前に考慮する概算時間を指定します。 たとえば、顧客が 2 年ごとにラップトップを購入することを示します。 このウィンドウでは、過去 2 年間の購入履歴が表示され、アイテムが見つかった場合、そのアイテムはレコメンデーションから除外されます。

1. **次へ** を選択します。

### <a name="add-required-data"></a>必須データの追加

1. **データの追加** を選択し、サイド ペインで必要な取引や購入履歴の情報を含むアクティビティ タイプを選択します。

1. **活動の選択** 配下で、 選択されたアクティビティの中から、計算の対象とする具体的な活動を選択します。

   :::image type="content" source="media/product-recommendation-select-semantic-activity.PNG" alt-text="セマンティック タイプの配下で特定の活動を選択した状態のを示すサイド ペイン。":::

1. アクティビティをセマンティック タイプにマッピングしていない場合は、**編集** を選択してマッピングをします。 セマンティック アクティビティをマッピングするガイド付きエクスペリエンスが開きます。 選択した活動タイプの対応するフィールドにデータをマッピングします。

   :::image type="content" source="media/product-recommendation-set-activity-type.PNG" alt-text="ページ設定の活動タイプ。":::

1. 活動を対応するセマンティック タイプにマッピングした後、**次へ** を選択して続行します 
 
1. セマンティックの属性を、モデルの実行に必要なフィールドにマッピングします。

1. **保存** を選択します。

1. **次へ** を選択します。


### <a name="configure-product-filters"></a>製品フィルターの構成

場合によっては、特定の製品のみが、作成する予測の種類に対して有益または適切であることがあります。 製品フィルターを使用すると、特定の特性を持つ製品のサブセットを識別して、顧客に推奨できます。 モデルは、パターンを学習するために使用可能なすべての製品を使用しますが、出力では製品フィルターに一致する製品のみを使用します。

1. **製品情報の追加** の手順で、各製品の情報を含む製品カタログを追加します。 **次へ** を選択して、必要な情報をマップします。

3. **製品フィルター** の手順で、次のオプションから選択します。

   * **フィルターなし**: 製品レコメンデーションの予測ですべての製品を使用します。

   * **特定の製品フィルターを定義する**: 製品レコメンデーションの予測で特定の製品を使用します。

1. **次へ** を選択します。

1. 製品フィルターを定義することを選択した場合は、ここで定義する必要があります。 **製品カタログの属性** ペインで、フィルターに含める属性を *製品カタログ エンティティ* から属性を選択します。

   :::image type="content" source="media/product-filters-sidepane.png" alt-text="製品フィルター用に選択する製品カタログ エンティティの属性を示すサイド ペイン。":::

1. 製品フィルターで **and** または **or** コネクタを使用して、製品カタログから選択した属性を論理的に組み合わせるかどうかを選択します。
   
   :::image type="content" source="media/product-filters-sample.png" alt-text="論理 AND コネクタと組み合わせた製品フィルターの構成例。":::

1. **次へ** を選択します。

### <a name="set-update-schedule-and-review-configuration"></a>更新スケジュールの設定と構成のレビュー

1. モデルの再トレーニングを実施する頻度を設定します。 この設定は、新たなデータが Customer Insights にインポートされる際に予測の精度を更新するために重要です。 多くの企業は、月に1度再トレーニングして、予測の精度を高めることができます。

1. **次へ** を選択します。

1. 構成を確認します。 表示された値の配下の **編集する** を選択して、予測の構成の任意の部分に戻ることができます。 または、進行状況のインジケーターから構成のステップを選択できます。

1. すべての値が正しく構成されている場合は、**保存して実行する** を選択して予測プロセスを開始します。 **自分の予測** タブで、予測の状態を確認できます。 予測で使用されるデータの量によっては、プロセスの完了までに数時間かかる場合があります。

## <a name="review-a-prediction-status-and-results"></a>予測の状態と結果を確認する

1. **インテリジェンス** > **予測** で **自分の予測** タブに移動します。
   > [!div class="mx-imgBorder"]
   > ![自分の予測ページを表示する。](media/product-recommendation-mypredictions.PNG "自分の予測ページを表示する")

1. レビューする予測を選択します。
   - **予測名 :** 作成時に入力された予測の名前。
   - **予測タイプ :** 予測に使用されるモデルのタイプ
   - **出力エンティティ :** 予測の出力を保存するエンティティの名前。 **データ** > **エンティティ** で、この名前を持つエンティティを見つけることができます。    
      出力エンティティの *スコア* は、レコメンデーションの定量的メジャーです。 モデルは、スコアの低い製品よりもスコアの高い製品を推奨します。
   - **予測されたフィールド:** このフィールドは、一部の種類の予測に対してのみ入力され、製品レコメンデーションの予測では使用されません。
   - **状態 :** 実行された予測の現在の状態を表示します。
        - **待機中 :** 予測は現在、他のプロセスの実行を待機しています。
        - **更新中 :** 予測は現在、処理の「スコア」ステージを実行し、出力エンティティに連携される結果を生成します。
        - **失敗 :** 予測は失敗しました。 詳細については、 **ログ** を選択してください。
        - **成功 :** 予測は成功しました。 省略記号配下の **表示** を選択して予測を確認します
   - **編集日 :** 予測の構成が変更された日付。
   - **最終更新日 :** 予測結果が出力エンティティで更新された日付。

1. 予測の横にある縦の省略記号を選択して、確認する結果の **表示** を選択します。
   > [!div class="mx-imgBorder"]
   > ![編集、更新、表示、ログ、お削除を含む予測の縦の省略記号メニューのオプションの表示。](media/product-recommendation-verticalellipses.PNG "編集、更新、表示、ログ、お削除を含む予測の縦の省略記号メニューのオプションの表示")

1. 結果ページには、データの 5 つの主要なセクションがあります:
    1. **トレーニング モデルのパフォーマンス :** 使用可能なスコアは A、B、C です。 このスコアは予測のパフォーマンスを示し、出力エンティティに格納されている結果を使用するかどうかの決定に役立ちます。
        - スコアは次のルールに基づいて決定されます。
            - **A** "Success @ K" メトリックがベースラインより最低 10% 高い場合、モデルは **A** 品質とみなされます。 
            - **B** "Success @ K" メトリックがベースラインより 0% - 10% 高い場合、モデルは **B** 品質とみなされます。
            - **C** "Success @ K" メトリックがベースラインより低い場合、モデルは **C** 品質とみなされます。
               
               > [!div class="mx-imgBorder"]
               > ![モデルのパフォーマンス結果を表示する。](media/product-recommendation-modelperformance.PNG "モデルのパフォーマンス結果を表示する")
            - **ベースライン**: モデルは、すべての顧客の購入数で最も推奨される製品を取得し、モデルによって識別された学習ルールを使用して、顧客向けの一連のレコメンデーションを作成します。 次に、予測は、製品を購入した顧客の数によって計算された上位の製品と比較されます。 顧客が推奨製品に少なくとも 1 つの製品を持っていて、それが上位の購入製品にも見られた場合、それらはベースラインの一部と見なされます。 合計 100 人の顧客のうち推奨製品を購入した顧客が 10 人いた場合、ベースラインは 10% になります。
            - **Success @ K**: トランザクションの期間の検証セットを使用して、すべての顧客に対してレコメンデーションが作成され、トランザクションの検証セットと比較されます。 たとえば、12 か月の期間で、12 月はデータの検証セットとして確保される場合があります。 モデルで、過去 11 か月から学んだことに基づいて、12 月に購入するものを少なくとも 1 つ予測する場合、顧客が「Success @K」メトリックを増やします。
    
    1. **最も提案された製品 (集計あり):** 顧客のために予測された上位 5 つの製品。
       > [!div class="mx-imgBorder"]
       > ![最も推奨される上位 5 つの製品を示すグラフ。](media/product-recommendation-topproducts.PNG "最も推奨される上位 5 つの製品を示すグラフ")
    
    1. **主要なレコメンデーション要因:** モデルでは、顧客のトランザクション履歴を使用して製品レコメンデーションを行います。 過去の購入に基づいてパターンを学習し、顧客と製品の類似点を見つけます。 次に、これらの類似点を利用して、製品レコメンデーションを生成します。
    以下は、モデルによって生成される製品レコメンデーションに影響を与える可能性のある要因です。 
        - **過去のトランザクション**: 過去の購入パターンは、モデルが製品レコメンデーションを生成するために利用されました。 たとえば、_Surface Book 3_ と _Surface ペン_ を最近購入した人には、_Surface アーク マウス_ を推奨することができます。 モデルはこれまで、多くの顧客が _Surface Book 3_ と _Surface ペン_ 購入後、_Surface アーク マウス_ を購入していることを学習しました。
        - **顧客の類似性**: 推奨される製品は、類似した購入パターンを示す他の顧客によってこれまで購入されていました。 たとえば、Jennifer と Brad が _Surface Headphones 2_ を最近購入したため、John は _Surface Headphones 2_ を推奨されました。 モデルは、Jennifer と Brad がこれまで類似の購入パターンを持っていたことから、John が似ていると考えています。
        - **製品の類似性**: 推奨される製品は、顧客が以前に購入した他の製品と類似しています。 モデルは、2 つの製品が一緒に購入された場合、または類似する顧客によって購入された場合、類似していると見なします。 たとえば、あるユーザーが _USB-C - USB アダプター_ を以前購入したことがあり、モデルが過去の購入パターンから _USB ストレージ ドライブ_ が _USB-C - USB アダプター_ と類似していると判断して、_USB ストレージ ドライブ_ を推奨します。

        すべての製品レコメンデーションは、これらの要因の 1 つ以上に影響されます。 各影響要因が役割を果たしたレコメンデーションの割合が、グラフに視覚化されます。 次の例では、レコメンデーションの 100% が過去のトランザクション、60% が顧客の類似性、22% が製品の類似性の影響を受けています。 グラフのバーにカーソルを合わせると、影響要因が寄与した正確な割合が表示されます。

        > [!div class="mx-imgBorder"]
        > ![主要なレコメンデーション要因。](media/product-recommendation-keyrecommendationfactors.png "製品レコメンデーションを生成するためにモデルによって学習された主要なレコメンデーション要因")
       
     
   1. **データ統計**: モデルが考慮したトランザクション、顧客、および製品の数の概要を示します。 パターンを学習し、製品レコメンデーションを生成するために使用された入力データに基づいています。

      > [!div class="mx-imgBorder"]
      > ![データ統計。](media/product-recommendation-datastatistics.png "パターンを学習するためにモデルによって使用された inout データに関するデータ統計")

      このセクションでは、モデルがパターンを学習し、製品レコメンデーションを生成するために使用したデータ ポイントに関する統計を示します。 モデル構成で構成されたフィルタリングは、モデルによって生成された出力に適用されます。 ただし、モデルは利用可能なすべてのデータを使用してパターンを学習します。 したがって、モデル構成で製品フィルタリングを使用する場合、このセクションでは、パターンを学習するためにモデルが分析した製品の総数が表示されますが、定義されたフィルタリング基準に一致する製品の数とは異なる場合があります。

   1. **信頼度の高い製品に関するレコメンデーション:** モデルが顧客によって購入される可能性が高いと考えている、顧客に提供されるレコメンデーションのサンプル。    
      製品カタログを追加すると、製品 ID は製品名に置き換えられます。 製品名は、予測に関するより実用的で直感的な情報を提供します。
       > [!div class="mx-imgBorder"]
       > ![個々の顧客の一部のセットに対する信頼性の高い提案を示すリスト。](media/product-recommendation-highconfidence.PNG "個々の顧客の一部のセットに対する信頼性の高い提案を示すリスト")

## <a name="manage-predictions"></a>予測の管理

予測を最適化、トラブルシューティング、更新、または削除することができます。 入力データのユーザビリティ レポートを確認して、予測をより高速で信頼性の高いものにする方法を見つけます。 詳細については、[予測の管理](manage-predictions.md) を参照してください。


[!INCLUDE [footer-include](includes/footer-banner.md)]
