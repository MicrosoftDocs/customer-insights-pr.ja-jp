---
title: 製品レコメンデーションを予測する
description: 顧客が購入またはやり取りする可能性のある製品を予測します。
ms.date: 09/30/2022
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: conceptual
author: wmelewong
ms.author: wameng
manager: shellyha
ms.openlocfilehash: 0057d6796bb60db44d08b58d9e0daaf6e7c90fde
ms.sourcegitcommit: be341cb69329e507f527409ac4636c18742777d2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/30/2022
ms.locfileid: "9610288"
---
# <a name="predict-product-recommendations"></a>製品レコメンデーションを予測する

製品レコメンデーション モデルは、予測製品レコメンデーションのセットを作成します。 レコメンデーションは、以前の購入行動と同様の購入パターンを持つ顧客に基づいています。 このモデルは、個人消費者 (B-to-C) 向けです。

ビジネスのためのさまざまなタイプの製品と、顧客とその製品との関わり方についてのビジネス知識が必要です。 以前に顧客が購入した製品または新製品のレコメンデーションをサポートします。

製品レコメンデーションは、現地の法律や規制、および顧客の期待に左右される場合がありますが、モデルは特に考慮に入れるよう構築されていません。 そのため、**レコメンデーションを顧客に提供する前に確認して**、適用される法律や規制、および推奨する対象である顧客の期待に準拠していることを確認する必要があります。

このモデルの出力は、製品 ID に基づいたレコメンデーションを提供します。 配信メカニズムでは、予測された製品 ID を顧客に適したコンテンツにマップして、ローカリゼーション、画像コンテンツ、およびその他のビジネス固有のコンテンツや動作を説明する必要があります。

> [!TIP]
> サンプル データを使用して、製品レコメンデーションの予測を試してください: [製品のレコメンデーション予測サンプル ガイド](sample-guide-predict-product-recommendation.md)。

## <a name="prerequisites"></a>前提条件

- 少なくとも [共同作成者のアクセス許可](permissions.md)
- 少なくとも 100 人の顧客、10,000 人を超える顧客が望ましい。
- 顧客識別子、トランザクションを個々の顧客に照合するための一意識別子
- 少なくとも 1 年間のトランザクション データ、季節性を含める場合は 2 - 3 年が望ましい。 理想的には、顧客 ID ごとに少なくとも 3 つ以上のトランザクション。 取引履歴には以下が含まれている必要があります:
  - **トランザクション ID**: 購入またはトランザクションの一意識別子。
  - **トランザクションの日付**: 購入またはトランザクションの日付。
  - **トランザクションの値:**: 購入またはトランザクションの数値。
  - **一意の製品 ID**: データが品目レベルの場合は、購入した製品またはサービスの ID。
  - **購入または返品**: ブール値の true/false 値で、*true* はトランザクションが返品であることを示します。 購入または返品データがモデルに指定されておらず、**トランザクションの価値** がマイナスの場合、返品を推測します。
- 製品フィルターとして使用する製品カタログ データ エンティティ。

> [!NOTE]
> - モデルには、顧客のトランザクション履歴が必要で、トランザクションは、ユーザーと製品とのやりとりを記述するデータです。 たとえば、製品の購入、クラスの受講、イベントへの参加などです。
> - 構成できるトランザクション履歴エンティティは 1 つだけです。 複数の購入エンティティがある場合は、データ インジェストの前に Power Query で結合します。
> - 注文と注文の詳細が異なるエンティティである場合は、モデルで使用する前に結合します。 モデルは、エンティティ内の注文 ID またはレシート ID のみでは機能しません。

## <a name="create-a-product-recommendation-prediction"></a>製品レコメンデーション予測を作成する

いつでも **下書きを保存** を選択して、予測をドラフトとして保存します。 ドラフト予測は **自分の予測** タブに表示されます。

1. **インテリジェンス** > **予測** に移動します。

1. **作成** タブで、**製品レコメンデーション (プレビュー)** タイルで **モデルを使用する** を選択します。

1. **開始する** を選択します。

1. 他のモデルまたはエンティティと区別するための **このモデルに名前を付ける** と **出力エンティティ名**。

1. **次へ** を選択します。

### <a name="define-product-recommendation-preferences"></a>製品レコメンデーションの基本設定を定義する

1. 顧客に推薦する **製品数** を設定します。 この値は、配信方法がデータをどのように入力するかによって異なります。

1. 顧客が以前に購入した製品を **期待される再購入** フィールドに含めるかどうかを選択します。

1. **ルック バック ウィンドウ** には、モデルがユーザーに製品を再度推奨する前に考慮する概算時間を設定します。 たとえば、顧客が 2 年ごとにラップトップを購入することを示します。 モデルは、過去 2 年間の購入履歴を調べ、該当するアイテムがあれば、そのアイテムはレコメンデーションから除外されます。

1. **次へ** を選択します。

### <a name="add-purchase-history"></a>購入履歴の追加

1. **顧客トランザクション履歴** の **データの追加** を選択します。

1. 必要なトランザクションや購入履歴の情報を含む、セマンティック活動タイプ **SalesOrderLine** を選択します。 活動が設定されていない場合は、**こちら** を選択して作成します。

1. **活動** で、活動の作成時に活動属性がセマンティックにマップされた場合は、計算の対象となる特定の属性またはエンティティを選択します。 セマンティック マッピングが行われなかった場合は、**編集** を選択して、データをマップします。

   :::image type="content" source="media/product-recommendation-select-semantic-activity.PNG" alt-text="セマンティック タイプの配下で特定の活動を選択した状態のを示すサイド ペイン。":::

1. **次へ** を選択し、このモデルに必要な属性を確認します。

1. **保存** を選択します。

1. **次へ** を選択します。

### <a name="add-product-information-and-filters"></a>製品情報とフィルターを追加する

場合によっては、特定の製品のみが、作成する予測の種類に対して有益または適切であることがあります。 製品フィルターを使用して、特定の特性を持つ製品のサブセットを特定して、顧客に推奨します。 モデルは、パターンを学習するために使用可能なすべての製品を使用しますが、出力では製品フィルターに一致する製品のみを使用します。

1. 各製品の情報を含む製品カタログ エンティティを追加します。 必要な情報をマップして、**保存** を選択します。

1. **次へ** を選択します。

1. **製品フィルター** を選択します:

   - **フィルターなし**: 製品レコメンデーションの予測ですべての製品を使用します。

   - **特定の製品フィルターを定義する**: 製品レコメンデーションの予測で特定の製品を使用します。 **製品カタログの属性** ペインで、フィルターに含める属性を製品カタログ エンティティから選択します。

     :::image type="content" source="media/product-filters-sidepane.png" alt-text="製品フィルター用に選択する製品カタログ エンティティの属性を示すサイド ペイン。":::

1. 製品フィルターで **and** または **or** を使用して、製品カタログから選択した属性を論理的に組み合わせるかどうかを選択します。

   :::image type="content" source="media/product-filters-sample.png" alt-text="論理 AND コネクタと組み合わせた製品フィルターの構成例。":::

1. **次へ** を選択します。

### <a name="set-update-schedule"></a>スケジュールの更新を設定する

1. モデルを再トレーニングする頻度を選択します。 この設定は、新たなデータが Customer Insights に取り込まれる際に予測の精度を更新するために重要です。 多くの企業は、月に1度再トレーニングして、予測の精度を高めることができます。

1. **次へ** を選択します。

### <a name="review-and-run-the-model-configuration"></a>モデル構成を確認して実行します

**確認して実行** ステップでは、構成の概要が表示され、予測を作成する前に変更を加えることができます。

1. 確認して変更を加えるには、手順のいずれかで **編集** を選択します。

1. 選択内容に問題がなければ、**保存して実行** を選択して、モデルの実行を開始します。 **完了** を選択します。 **自分の予測** タブは、予測の作成中に表示されます。 予測で使用されるデータの量によっては、プロセスの完了までに数時間かかる場合があります。

[!INCLUDE [progress-details](includes/progress-details-pane.md)]

## <a name="view-prediction-results"></a>予測の結果を表示する

1. **インテリジェンス** > **予測** に移動します。

1. **自分の予測** タブで表示する予測を選択します。

結果ページには、データの 5 つの主要なセクションがあります。

- **モデルのパフォーマンス:** グレード A、B、C は、予測のパフォーマンスを示し、出力エンティティに格納された結果を使用するかどうかを決定するのに役立ちます。
  
  :::image type="content" source="media/product-recommendation-modelperformance.PNG" alt-text="グレード A のモデル パフォーマンス結果の画像。":::

  グレードは次のルールに基づいて決定されます。
  - **A** "Success @ K" メトリックがベースラインより 10% を超えている場合。
  - **B** "Success @ K" メトリックがベースラインより 0% - 10% 高い場合。
  - **C** "Success @ K" メトリックがベースライン未満の場合。
  - **ベースライン**: 全顧客の購入回数上位のおすすめ製品 + モデルで特定された学習ルール = 顧客へのおすすめ候補のセット。 次に、予測は、製品を購入した顧客の数によって計算された上位の製品と比較されます。 顧客が推奨製品に少なくとも 1 つの製品を持っていて、それが上位の購入製品にも見られた場合、それらはベースラインの一部と見なされます。 たとえば、全顧客 100 人のうちおすすめ製品を購入した顧客が 10 人いた場合、ベースラインは 10% になります。
  - **Success @ K**: すべての顧客に対してレコメンデーションが作成され、トランザクションの期間の検証セットと比較されます。 たとえば、12 か月の期間では、12 か月がデータの検証セットとして確保されます。 モデルで、過去 11 か月から学んだことに基づいて、12 月に購入するものを少なくとも 1 つ予測する場合、顧客が「Success @K」メトリックを増やします。

- **最も提案された製品 (集計あり):** 顧客のために予測された上位 5 つの製品。
  
  :::image type="content" source="media/product-recommendation-topproducts.PNG" alt-text="最も推奨される上位 5 つの製品を示すグラフ。":::

- **主要なレコメンデーション要因:** モデルでは、顧客のトランザクション履歴を使用して製品レコメンデーションを行います。 過去の購入に基づいてパターンを学習し、顧客と製品の類似点を見つけます。 次に、これらの類似点を利用して、製品レコメンデーションを生成します。
  以下の要因は、モデルによって生成される製品レコメンデーションに影響を与える可能性があります。
  - **過去のトランザクション**: おすすめ商品は過去の購入パターンに基づいていました。 たとえば、*Surface Book 3* と *Surface ペン* を最近購入した人には、*Surface アーク マウス* を推奨することができます。 モデルはこれまで、多くの顧客が *Surface Book 3* と *Surface ペン* 購入後、*Surface アーク マウス* を購入していることを学習しました。
  - **顧客の類似性**: 推奨される製品は、類似した購入パターンを示す他の顧客によってこれまで購入されていました。 たとえば、Jennifer と Brad が *Surface Headphones 2* を最近購入したため、John は *Surface Headphones 2* を推奨されました。 モデルは、Jennifer と Brad がこれまで類似の購入パターンを持っていたことから、John が似ていると考えています。
  - **製品の類似性**: 推奨される製品は、顧客が以前に購入した他の製品と類似しています。 モデルは、2 つの製品が一緒に購入された場合、または類似する顧客によって購入された場合、類似していると見なします。 たとえば、あるユーザーが *USB-C - USB アダプター* を以前購入したことがあり、モデルが過去の購入パターンから *USB ストレージ ドライブ* が *USB-C - USB アダプター* と類似していると判断して、*USB ストレージ ドライブ* を推奨します。

  すべての製品レコメンデーションは、これらの要因の 1 つ以上に影響されます。 各影響要因が役割を果たしたレコメンデーションの割合が、グラフに視覚化されます。 次の例では、レコメンデーションの 100% が過去のトランザクション、60% が顧客の類似性、22% が製品の類似性の影響を受けています。 グラフのバーにカーソルを合わせると、影響要因が寄与した正確な割合が表示されます。
  
  :::image type="content" source="media/product-recommendation-keyrecommendationfactors.png" alt-text="製品レコメンデーションを生成するためにモデルによって学習された主要なレコメンデーション要因。":::

- **データ統計**: モデルが考慮したトランザクション、顧客、および製品の数の概要。 パターンを学習し、製品レコメンデーションを生成するために使用された入力データに基づいています。

  :::image type="content" source="media/product-recommendation-datastatistics.png" alt-text="パターンを学習するためにモデルによって使用された入力データに関するデータ統計。":::
  
  モデルは利用可能なすべてのデータを使用してパターンを学習します。 したがって、モデル構成で製品フィルターを使用する場合、このセクションでは、パターンを学習するためにモデルが分析した製品の総数が表示されますが、定義されたフィルター条件に一致する製品の数とは異なる場合があります。 フィルターは、モデルによって生成された出力に適用されます。

- **製品レコメンデーションのサンプル:** 顧客が購入する可能性が高いとモデルが判断したレコメンデーションのサンプル。 製品カタログを追加すると、製品 ID は製品名に置き換えられます。

  :::image type="content" source="media/product-recommendation-highconfidence.PNG" alt-text="個々の顧客の一部のセットに対する信頼性の高い提案を示すリスト。":::

> [!NOTE]
> このモデルの出力エンティティでは、*スコア* は、レコメンデーションの定量的メジャーを示します。 モデルは、スコアの低い製品よりもスコアの高い製品を推奨します。 スコアを表示するには、**データ** > **エンティティ** に移動し、このモデルに定義した出力エンティティのデータ タブを表示します。

[!INCLUDE [footer-include](includes/footer-banner.md)]
