---
title: データを統合する前に重複を削除する
description: 統合プロセスの 2 番目の手順は、重複が見つかったときに保持するレコードを選択することです。
recommendations: false
ms.date: 04/22/2022
ms.subservice: audience-insights
ms.topic: tutorial
author: v-wendysmith
ms.author: mukeshpo
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-map
- ci-match
- customerInsights
ms.openlocfilehash: 27dff3551ab411a12c273536d7431d651c48573e
ms.sourcegitcommit: 6a5f4312a2bb808c40830863f26620daf65b921d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/11/2022
ms.locfileid: "8741663"
---
# <a name="remove-duplicates-before-unifying-data"></a>データを統合する前に重複を削除する

[!INCLUDE [m3-prod-trial-note](includes/m3-prod-trial-note.md)]

統合のこの手順では、オプションで、エンティティ内の重複レコードを処理するためのルールを設定できます。 *重複排除* は、重複するレコードを特定し、1 つのレコードにマージします。 ソース レコードは、代替 IDを使用してマージされたレコードにリンクされます。 ルールが構成されていない場合は、システム定義のルールが適用されます。

## <a name="include-enriched-entities-preview"></a>エンリッチされたエンティティを含む (プレビュー)

統合結果を改善するためにデータ ソース レベルでエンティティをエンリッチした場合は、それらを選択します。 詳細については、[データ ソースのエンリッチメント](data-sources-enrichment.md) を参照してください。

1. **重複レコード** ページで、ページの上部にある **エンリッチされたエンティティを使用する** を選択します。

1. **エンリッチされたエンティティを使用** ペインから、1 つ以上のエンリッチされたエンティティを選択します。

1. **完了** を選択します。

## <a name="define-deduplication-rules"></a>重複排除ルールを定義する

1. **重複レコード** ページで、エンティティを選択し、**ルールを追加** を選択して重複排除ルールを定義します。

   :::image type="content" source="media/m3_duplicates_showmore.png" alt-text="もっと表示が強調表示された重複レコード ページのスクリーンショット":::

   1. **ルールの追加** ウィンドウに、次の情報を入力します。
      - **フィールドを選択**: 重複を確認するエンティティの使用可能なフィールドのリストから選択します。 各顧客に固有である可能性が高いフィールドを選択します。 たとえば、電子メール アドレス、または名前、都市、電話番号の組み合わせです。
      - **正規化**: 選択された属性について、次の正規化オプションから選択します。
        - **数字**: ローマ数字などの他の数字システムをアラビア数字に変換します。 *VIII* は *8* になります。
        - **記号**: すべての記号と特殊文字を削除します。 *Head&Shoulder* は *HeadShoulder* になります。
        - **テキストを小文字に: すべての文字を小文字に変換します**。 *ALL CAPS and Title Case* は *all caps and title case* になります。
        - **タイプ (電話、名前、住所、組織)**: 名前、役職、電話番号、住所などを標準化します。
        - **Unicode から ASCII へ**: Unicode 表記を ASCII 文字に変換します。 */u00B2* は *2* になります。
        - **空白**: すべてのスペースを削除します。 *Hello   World* は、*HelloWorld* になります。
      - **精度**: この条件に適用する精度のレベルを設定します。
        - **基本**: *低 (30%)*、*中 (60%)*、*高 (80%)*、*完全一致t (100%)* から選択します。 100％一致するレコードのみを一致とする場合は **完全一致** を選択します。
        - **カスタム**: レコードが一致する必要がある割合を設定します。 システムは、このしきい値を超えるレコードのみを照合します。
      - **名前**: ルールの名前です。

      :::image type="content" source="media/m3_duplicates_add.png" alt-text="重複を削除するためのルールの追加ウィンドウのスクリーンショット。":::

   1. 必要に応じて、**追加** > **条件を追加** を選択し、ルールに条件を追加します。 条件は論理 AND 演算子で接続されるため、すべての条件が満たされた場合にのみ実行されます。

   1. 必要に応じて、**追加** > **例外の追加** に[ルールに例外を追加](match-entities.md#add-exceptions-to-a-rule) します。 例外は、誤検知と擬陰性のまれなケースに対処するために使用されます。

   1. **完了** を選択してルールを作成します。

1. オプションで、[ルールをさらに追加](#define-deduplication-rules) します。

1. エンティティを選択してから **マージの基本設定を編集する**。

1. **マージの基本設定** ウィンドウ:
   1. 3 つのオプションのいずれかを選択して、重複が見つかった場合に保持するレコードを決定します。
      - **最も多く入力された**: 最も多くの属性フィールドが入力されたレコードを勝者レコードとして識別します。 既定のマージ オプションです。
      - **最も新しい**: 最新性に基づいて勝者レコードを識別します。 最新を定義するには、日付または数値フィールドが必要です。
      - **最も古い**: 最も古いレコードに基づいて勝者レコードを識別します。 最新を定義するには、日付または数値フィールドが必要です。
      
      同点の場合、勝者レコードは MAX(PK) またはより大きな主キー値を持つレコードです。
      
   1. 必要に応じて、エンティティの個々の属性にマージ設定を定義するには、ページ下部にある **詳細** を選択します。 たとえば、最新のメールと最も完全なアドレスを異なるレコードから保持することを選択できます。 エンティティを展開してすべての属性を表示し、個々の属性に使用するオプションを定義します。 最新性に基づくオプションを選択する場合は、最新性を定義する日付/時刻フィールドも指定する必要があります。

      :::image type="content" source="media/m3_adv_merge.png" alt-text="最近のメールと住所全体を表示するマージの高度な基本設定ウィンドウ":::

   1. **完了** を選択して、マージ設定を適用します。

1. 重複排除ルールとマージ設定を定義した後、**次へ** を選択します。
  
> [!div class="nextstepaction"]
> [単一エンティティの次の手順: フィールドを統合する](merge-entities.md)

> [!div class="nextstepaction"]
> [複数のエンティティの次の手順: 条件の一致](match-entities.md)

## <a name="deduplication-output-as-an-entity"></a>エンティティとしての重複排除出力

重複排除プロセスでは、ソース エンティティごとに新しい重複排除エンティティが作成されます。 これらのエンティティは、**エンティティ** ページの **システム** セクションに **ConflationMatchPairs:CustomerInsights** とともに、**Deduplication_DataSource_Entity** という名前で表示されます。

重複排除出力エンティティには、次の情報が含まれています。

- ID/キー
  - 主キーと代替 ID フィールド。 代替 ID フィールドは、レコードに対して識別されたすべての代替 ID で構成されます。
  - Deduplication_GroupId フィールドには、指定された重複排除フィールドに基づいてすべての類似レコードをグループ化するエンティティ内で識別されたグループまたはクラスターが表示されます。 これは、システム処理の目的で使用されます。 手動の重複排除ルールが指定されておらず、システム定義の重複排除ルールが適用されている場合、このフィールドが重複排除出力エンティティに表示されていない可能性があります。
  - Deduplication_WinnerId: このフィールドには、識別されたグループまたはクラスターからの勝者 ID が含まれます。 Deduplication_WinnerId がレコードの主キー値と同じである場合、そのレコードが勝者レコードであることを意味します。
- 重複排除ルールを定義するために使用されるフィールド。
- [ルール] フィールドと [スコア] フィールドは、どの重複排除ルールが適用され、照合アルゴリズムによってスコアが返されことを示します。

[!INCLUDE[footer-include](includes/footer-banner.md)]
