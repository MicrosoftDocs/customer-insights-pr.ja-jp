---
title: メジャー ビルダーを使用して新しいメジャーを作成する
description: 最初からメジャーを構築して、ビジネスに関する主要なメトリックを分析します。
ms.date: 03/25/2022
ms.subservice: audience-insights
ms.topic: conceptual
author: v-wendysmith
ms.author: wameng
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-measure-builder
- customerInsights
ms.openlocfilehash: fac00b8a1b4ca6e09dd29abe46dfe240adcc029e
ms.sourcegitcommit: 8a28e9458b857adf8e90e25e43b9bc422ebbb2cd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/18/2022
ms.locfileid: "9170855"
---
# <a name="create-measures-with-measure-builder"></a>メジャー ビルダーを使用して新しいメジャーを作成する

メジャー ビルダーでは、数学演算子、集計関数、およびフィルターを使用して計算を定義できます。 統合された *顧客* エンティティに関連するエンティティの属性を使用してメジャーを定義します。

B-to-C および B-to-B 環境でメジャーを作成し、同じように使用することができます。 ただし、B-to-B 環境で、[階層を持つアカウントを使用する](relationships.md#set-up-account-hierarchies)場合は、関連するサブアカウント全体でメジャーを集計するかどうかを選択します。

# <a name="individual-consumers-b-to-c"></a>[個人消費者 (B2C)](#tab/b2c)

個々の顧客のレベル (顧客属性、顧客メジャー) またはビジネス/組織のレベル (ビジネス メジャー) でメジャーを作成します。 顧客属性と顧客メジャーにより、顧客ごとのパフォーマンスを追跡できるようになります。 たとえば、各顧客による総支出です。 ビジネス メジャーは、ビジネスごとのパフォーマンスを追跡します。 たとえば、会社による総収益です。

- 顧客属性: 出力を新しい属性として生成します。この属性は、システムで生成されたエンティティに *Customer_Measure* という名前の新しい列として保存されます。 1 つの顧客属性を更新すると、*Customer_Measure* の他のすべての顧客属性も同時に更新されます。 また、顧客属性は顧客プロファイル カードに表示されます。 実行または保存すると、顧客属性を顧客メジャーに変更できなくなります。

- 顧客メジャー: 固有のエンティティとして出力を生成します。顧客メジャーを実行または保存すると、それを顧客属性に変更できなくなります。 顧客メジャーは、顧客プロファイル カードに表示されません。

- ビジネス メジャー: 固有のエンティティとして出力を生成し、Customer Insights 環境のホーム ページに表示します。

1. **メジャー** に移動します。

1. **新規** > **ユーザー独自の作成** を選択します。

   :::image type="content" source="media/measure-b2c.png" alt-text="B-to-C メジャーの空の構成画面。" lightbox="media/measure-b2c.png":::

1. 無題のメジャーの横にある **詳細の編集** を選択します。 メジャーの名前を入力します。 オプションで、[タグ](work-with-tags-columns.md#manage-tags)をメジャーに追加します。

   :::image type="content" source="media/measures_edit_details.png" alt-text="[詳細の編集] ダイアログ ボックス。":::

1. **完了** を選択します。

1. ビジネスレベルのパフォーマンスを追跡するには、**メジャーの種類** を **ビジネス レベル** に切り替えます。 既定では、**顧客レベル** が選択されています。 **顧客レベル** では、*CustomerId* 属性がディメンションに自動的に追加され、**ビジネス レベル** ではそれが自動的に削除されます。

1. 構成領域で、**関数の選択** ドロップダウン メニューから集計関数を選択します。 集計関数は次のとおりです。
   - **Sum**
   - **平均**
   - **カウント**
   - **一意の件数**
   - **Max**
   - **Min**
   - **First**: データ レコードの最初の値を取得します
   - **最終**: データ レコードに追加された最後の値を取得します
   - **ArgMax**: ターゲット関数から最大値を与えるデータ レコードを検索します
   - **ArgMin**: ターゲット関数から最小値を与えるデータ レコードを検索します

1. **属性の追加** を選択して、このメジャーを作成するためのデータを選択します。

   1. **属性** タブを選択します。
   1. データ エンティティ: 測定する属性を含むエンティティを選択します。
   1. データ属性: メジャーを計算するために集計関数で使用する属性を選択します。 一度に選択できる属性は 1 つだけです。
   1. オプションで、**メジャー** タブを選択することにより既存のメジャーからデータ属性を選択したり、エンティティまたはメジャー名を検索したりできます。
   1. **追加** を選択します。

1. より複雑なメジャーを作成するには、属性を追加するか、メジャー関数で数学演算子を使用できます。

1. フィルターを追加するには、構成領域で **フィルター** を選択します。 フィルターを適用すると、フィルタに一致するレコードのみがメジャーの計算に使用されます。
  
   1. **フィルター** ウィンドウの **属性の追加** セクションで、フィルターの作成に使用する属性を選択します。
   1. フィルター演算子を設定して、選択したすべての属性のフィルターを定義します。
   1. **適用する** を選択します。

1. **ディメンション** を選択して、メジャー出力エンティティに列として追加するフィールドをさらに選択します。

   1. **ディメンションの編集** を選択して、メジャー値をグループ化するデータ属性を追加します。 たとえば、都市や性別。
      > [!TIP]
      > **顧客レベル** を **メジャーの種類** として選択ている場合は、*CustomerId* 属性はすでに追加されています。 属性を削除すると、**メジャーの種類** が **ビジネス レベル** に切り替わります。
   1. **完了** を選択します。

1. 整数に置き換える必要のある値がデータにある場合は、**ルール** を選択します。 ルールを構成し、置換として整数のみを選択していることを確認します。 たとえば、*null* は *0* に置換します。

1. マッピングしたデータ エンティティと *Customer* エンティティの間に複数のパスがある場合、識別された [エンティティ関連パス](relationships.md) の 1 つを選択します。 メジャー結果は、選択したパスによって異なります。

   1. **関係パス** を選択し、メジャーを識別するために使用するエンティティ パスを選択します。 *Customer* エンティティへのパスが 1 つしかない場合、このコントロールは表示されません。
   1. **完了** を選択します。

1. メジャーの計算をさらに追加するには、**新しい計算** を選択します。 新しい計算には、同じエンティティ パス上のエンティティのみを使用します。 メジャー出力エンティティの列として、より多くの計算が表示されます。 必要に応じて、**名前の編集** を選択して計算の名前を作成します。

1. 計算で垂直の省略記号 (&vellip;) を選択し、メジャーの計算を **複製** または **削除** します。

1. **プレビュー** エリアには、フィルターやディメンションなど、メジャー出力エンティティのデータ スキーマが表示されます。 プレビューは、構成の変更に動的に反応します。

1. **実行** を選択して、構成されたメジャーの結果を計算します。 現在の構成を保持し、後でメジャーを実行する場合、**保存して閉じる** を選択します。 **メジャー** ページが表示されます。

# <a name="business-accounts-b-to-b"></a>[事業取引先企業 (B2B)](#tab/b2b)

個々の取引先企業のレベル (顧客属性、顧客メジャー) またはすべての取引先企業のレベル (ビジネス メジャー) でメジャーを作成します。

- 顧客メジャー: 固有のエンティティとして出力を生成します。 顧客メジャーは、顧客プロファイル カードに表示されません。

- ビジネス メジャー: 固有のエンティティとして出力を生成し、Customer Insights 環境のホーム ページに表示します。

1. **メジャー** に移動します。

1. **新規** を選択します。

   :::image type="content" source="media/measure-b2b.png" alt-text="B-to-B メジャーの空の構成画面。":::

1. 無題のメジャーの横にある **詳細の編集** を選択します。 メジャーの名前を入力します。 オプションで、[タグ](work-with-tags-columns.md#manage-tags)をメジャーに追加します。 
   :::image type="content" source="media/measures_edit_details.png" alt-text="[詳細の編集] ダイアログ ボックス。":::

1. **完了** を選択します。

1. 構成領域で、**関数の選択** ドロップダウン メニューから集計関数を選択します。 集計関数は次のとおりです。
   - **Sum**
   - **平均**
   - **カウント**
   - **一意の件数**
   - **Max**
   - **Min**
   - **First**: データ レコードの最初の値を取得します
   - **最終**: データ レコードに追加された最後の値を取得します

1. **属性の追加** を選択して、このメジャーを作成するためのデータを選択します。

   1. **属性** タブを選択します。
   1. データ エンティティ: 測定する属性を含むエンティティを選択します。
   1. データ属性: メジャーを計算するために集計関数で使用する属性を選択します。 一度に選択できる属性は 1 つだけです。
   1. オプションで、**メジャー** タブを選択することにより既存のメジャーからデータ属性を選択したり、エンティティまたはメジャー名を検索したりできます。
   1. **追加** を選択して、選択した属性をメジャーに追加します。

1. より複雑なメジャーを作成するには、属性を追加するか、メジャー関数で数学演算子を使用できます。

1. フィルターを追加するには、構成領域で **フィルター** を選択します。 フィルターを適用すると、フィルタに一致するレコードのみがメジャーの計算に使用されます。
  
   1. **フィルター** ウィンドウの **属性の追加** セクションで、フィルターの作成に使用する属性を選択します。
   1. フィルター演算子を設定して、選択したすべての属性のフィルターを定義します。
   1. **適用** を選択して、フィルタ＝をメジャーに追加します。

1. **ディメンション** を選択して、メジャー出力エンティティに列として追加するフィールドをさらに選択します。

   1. **ディメンションの編集** を選択して、メジャー値をグループ化するデータ属性を追加します。 たとえば、都市や性別。
      > [!TIP]
      > 顧客レベルがメジャーの種類であることを示す *CustomerId* 属性がすでに追加されています。 属性を削除すると、メジャーの種類がビジネス レベルに切り替わります。
   1. **完了** を選択して、ディメンションをメジャーに追加します。

1. 整数に置き換える必要のある値がデータにある場合は、**ルール** を選択します。 ルールを構成し、置換として整数のみを選択していることを確認します。 たとえば、*null* は *0* に置換します。

1. [階層のあるアカウントを使用する](relationships.md#set-up-account-hierarchies) 場合、**サブアカウントをロールアップする** を確認します。
   - **オフ** に設定されている場合、メジャーはすべてのアカウントに対して計算されます。 すべてのアカウントが独自の結果を取得します。
   - **オン** に設定されている場合、**編集** を選択して、取り込んだ階層に従ってアカウント階層を選択します。 メジャーはサブアカウントで集計されるため、結果は 1 つだけになります。

1. マッピングしたデータ エンティティと *Customer* エンティティの間に複数のパスがある場合、識別された [エンティティ関連パス](relationships.md) の 1 つを選択します。 メジャー結果は、選択したパスによって異なります。

   1. **関係パス** を選択し、メジャーを識別するために使用するエンティティ パスを選択します。 *Customer* エンティティへのパスが 1 つしかない場合、このコントロールは表示されません。
   1. **完了** を選択して、選択肢を適用します。

1. 計算で垂直の省略記号 (&vellip;) を選択し、メジャーの計算を **複製** または **削除** します。

1. **プレビュー** エリアには、フィルターやディメンションなど、メジャー出力エンティティのデータ スキーマが表示されます。 プレビューは、構成の変更に動的に反応します。

1. **実行** を選択して、構成されたメジャーの結果を計算します。 現在の構成を保持し、後でメジャーを実行する場合、**保存して閉じる** を選択します。 **メジャー** ページが表示されます。

---

## <a name="next-step"></a>次のステップ

既存のメジャーを使用して、[顧客セグメント](segments.md)を作成します。

[!INCLUDE [footer-include](includes/footer-banner.md)]
