---
title: 顧客または業務上の取引先担当者活動
description: 顧客または業務上の取引先担当者活動を定義し、顧客プロファイルのタイムラインでこれらを表示します。
ms.date: 10/26/2022
ms.subservice: audience-insights
ms.reviewer: v-wendysmith
ms.topic: conceptual
author: srivas15
ms.author: shsri
manager: shellyha
searchScope:
- ci-entities
- ci-customer-card
- ci-relationships
- ci-activities
- ci-activities-wizard
- ci-measures
- ci-segment-suggestions
- customerInsights
ms.openlocfilehash: d8caa477278f04c3a0a95ced15f4bea2a22aa8cd
ms.sourcegitcommit: da6a2d189edacc8f2c0f2abedcb28245f26fe74c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/27/2022
ms.locfileid: "9723787"
---
# <a name="customer-or-business-contact-activities"></a>顧客または業務上の取引先担当者活動

顧客活動は、顧客または業務上の取引先担当者によるアクションまたはイベントです。 たとえば、トランザクション、サポート コールの時間、Web サイトのレビュー、購入、返品などがあります。 これらのアクティビティは、1 つ以上のデータ ソースに含まれています。 Customers Insights を使用して、それらの[データ ソース](data-sources.md) から取得された顧客活動を統合し、それらを顧客プロファイルに関連付けます。 これらの活動は、顧客プロファイルのタイムラインに時系列で表示されます。 [顧客カード アドイン](customer-card-add-in.md) ソリューションで Dynamics 365 アプリにタイムラインを含めます。

## <a name="define-a-customer-activity"></a>顧客活動の定義

エンティティには、顧客のタイムラインに含めるために少なくとも 1 つの **日付** 属性が必要です。 このようなエンティティが見つからない場合は、**活動の追加** コントロールは無効になります。

1. **データ** > **アクティビティ** に移動します。

1. **活動を追加する** を選択して、ガイド付きエクスペリエンスを開始します。

1. **活動データ** ステップに、以下の情報を入力します。

   - **活動名**: 活動の名前を選択します。
   - **活動エンティティ**: トランザクション データ、つまり活動データを含むエンティティを選択します。
   - **主キー** : レコードを一意に識別するフィールドを選択します。 重複する値、空の値、または欠損した値を含めることはできません。

     > [!NOTE]
     > 各行の主キーは、データ ソース更新を通して、一貫している必要があります。 行の主キーがデータ ソース更新で更新されると、出力活動エンティティに重複が作成されます。 

   :::image type="content" source="media/Activity_Wizard1.PNG" alt-text="名前、エンティティ、および主キーを使用して活動データを設定する。":::

1. **次へ** を選択します。

1. **リレーションシップ** ステップで、**関係の追加** を選択し、活動データを対応する顧客レコードに接続します。 この手順では、エンティティ間の接続を視覚化します。  

   - **外部キー**: 別のエンティティとの関係を確立するために使用される、活動エンティティの外部フィールド。
   - **エンティティ名へ**: 活動エンティティが関係する、対応するソース顧客エンティティ。 データ統合プロセスで使用されるソース顧客エンティティにのみ関連付けることができます。
   - **リレーションシップ名**: この活動エンティティと選択されたソース顧客エンティティの間にすでにリレーションシップが存在する場合、リレーションシップ名は読み取り専用モードになります。 そのような関連が存在しない場合は、このボックスに入力した名前で新しい関係が作成されます。

   :::image type="content" source="media/Activity_Wizard2.PNG" alt-text="エンティティの関連付けを定義する。":::

   > [!TIP]
   > B-to-B 環境では、取引先企業エンティティと他のエンティティのどちらかを選択できます。 取引先企業エンティティを選択すると、リレーションシップ パスが自動的に設定されます。 他のエンティティの場合、取引先企業エンティティに到達するまで、1 つ以上の中間エンティティの関係パスを定義する必要があります。

1. **適用** を選択して、関連付けを作成します。

1. **次へ** を選択します。

1. **活動の統合** の手順で、活動イベントと活動の開始時間を選択します。
   - **必須フィールド**
      - **イベント活動**: この活動のイベントであるフィールド。
      - **タイムスタンプ**: 活動の開始時刻を表すフィールド。

   - **オプション フィールド**
      - **追加情報**: この活動に関連する情報を含むフィールド。
      - **アイコン**: この活動の種類を最もよく表すアイコン。
      - **Web アドレス**: この活動に関する情報を含む URL を持つフィールド。 たとえば、このアクティビティのソースとなるトランザクション システムです。 この URL は、データ ソースの任意のフィールドにすることも、Power Query 変換を使用して新しいフィールドとして作成することもできます。 URL データは、*Unified Activity* エンティティに保存され、[API](apis.md) を使用してダウンストリームで使用できます。

   - **タイムラインに表示**
      - この活動を顧客プロファイルのタイムライン ビューに表示するかどうかを選択します。 **はい** を選択し、タイムラインに活動を表示するか、**いいえ** を選択して非表示します。

      :::image type="content" source="media/Activity_Wizard3.PNG" alt-text="Unified Activity エンティティで顧客活動データを指定する。":::

1. **次へ** を選択して活動タイプを選択し、**終了して確認** を選択して、活動の種類を **その他** に設定した状態で活動を保存します。

1. **活動の種類** の手順で活動の種類を選択し、オプションで Customer Insights の他の領域で使用するために活動の種類の一部をセマンティックにマップするかどうかを選択します。 現在、*フィードバック*、*ロイヤルティ*、*SalesOrder*、*SalesOrderLine*、および *サブスクリプション* アクティビティ タイプは、フィールドのマップに同意した後、セマンティクスをサポートします。 活動の種類が新しい活動に関連しない場合は、カスタム活動の種類に *その他* または *新規作成* を選択できます。

1. **次へ** を選択します。

1. **レビュー** の手順で、選択内容を確認します。 前の手順のいずれかに戻り、必要に応じて情報を更新します。

1. **活動を保存する** を選択して変更を適用し、**完了** を選択して、**データ** > **活動** に戻ります。 作成したアクティビティが表示されます。

1. すべてのアクティビティを作成したら、**実行** を選択して処理します。

[!INCLUDE [progress-details-include](includes/progress-details-pane.md)]

## <a name="manage-existing-customer-activities"></a>既存の顧客活動の管理

**データ** > **活動** に移動し、保存したアクティビティ、そのソース エンティティ、アクティビティ タイプ、およびそれらが顧客のタイムラインに含まれているかどうかを表示します。 活動のリストを任意の列で並べ替えたり、検索ボックスを使用して管理する活動を検索したりできます。

活動を選択して、使用可能なアクションを表示できます。

- 活動を **編集** して、構成を変更します。 レビュー ステップで構成が開きます。 構成を変更した後、**活動を保存する** を選択し、**実行** を選択して変更を処理します。
- **活動** の名前を変更します。 **保存** を選択して変更を適用します。
- 活動を **削除** します。 一度に複数の活動を削除するには、活動を選択してから **削除** を選択します。 削除を確認します。

## <a name="view-activity-timelines-on-customer-profiles"></a>顧客プロファイルの活動タイムラインを表示する

1. 活動構成で **活動タイムラインに表示** を選択した場合、**顧客** に移動して顧客プロファイルを選択し、**活動タイムライン** セクションに顧客の活動を表示します。

   :::image type="content" source="media/Activity_Timeline1.PNG" alt-text="顧客プロファイルで構成済みの活動を表示します。":::

1. 活動タイムラインで活動をフィルター処理するには:

   - 1 つまたは複数の活動アイコンを選択して、選択したタイプのみを含むように結果を絞り込みます。

     :::image type="content" source="media/Activity_Timeline2.PNG" alt-text="アイコンを使用して、タイプで活動をフィルタリングします。":::

   - **フィルター** を選択してフィルター パネルを開き、タイムライン フィルターを構成します。 *ActivityType* や *Date* 別にフィルタリングします。 **適用する** を選択します。

     :::image type="content" source="media/Activity_Timeline3.PNG" alt-text="フィルター パネルを使用して、フィルター条件を設定します。":::

> [!NOTE]
> 顧客プロファイルを離れると、活動フィルターが削除されます。 顧客プロファイルを開くたびにそれらを適用する必要があります。

## <a name="define-a-contact-activity"></a>取引先担当者活動の定義

ビジネス アカウント (B-to-B) の場合は、*ContactProfile* エンティティを使用して取引先担当者活動をキャプチャします。 各活動を担当した連絡先のアカウントの活動タイムラインを確認できます。 ほとんどの手順は、顧客活動マッピング構成に従います。

   > [!NOTE]
   > 取引先担当者レベルの活動を定義するには、[統合された取引先担当者プロファイル](data-unification-contacts.md) として、または [セマンティック マッピング](semantic-mappings.md#define-a-contactprofile-semantic-entity-mapping) を通して *ContactProfile* エンティティを作成する必要があります。
   >
   > 活動データ内の各レコードの **AccountID** と **ContactID** 属性の両方が必要です。
  
1. **データ** > **アクティビティ** に移動します。

1. **活動の追加** を選択します。

1. **活動データ** ステップに、以下の情報を入力します。

   - **活動名**: 活動の名前を選択します。
   - **活動エンティティ**: トランザクション データ、つまり活動データを含むエンティティを選択します。
   - **主キー** : レコードを一意に識別するフィールドを選択します。 重複する値、空の値、または欠損した値を含めることはできません。

     > [!NOTE]
     > 各行の主キーは、データ ソース更新を通して、一貫している必要があります。 行の主キーがデータ ソース更新で更新されると、出力活動エンティティに重複が作成されます。 


1. **リレーションシップ** ステップでは、連絡先データを仲介エンティティとして使用して、活動ソースデータとアカウントの間に間接的な関係を作成します。 詳細については、[直接および間接のリレーションシップ パス](relationships.md#relationship-paths)を参照してください。
   - *購入* と呼ばれる活動の関係の例:
      - 属性 **ContactID** の **購入ソース活動データ** > **連絡先データ**
      - 属性 **AccountID** の **連絡先データ** > **アカウント データ**

   :::image type="content" source="media/Contact_Activities1.png" alt-text="リレーションシップのセットアップ例。":::

1. リレーションシップを設定した後、**次へ** を選択して、活動マッピングの構成を完了します。 活動作成の詳細な手順については、[顧客活動の定義](#define-a-customer-activity) を参照してください。

1. 活動マッピングを実行します。

1. これで、連絡先レベルの活動が顧客のタイムラインに表示されます。

   :::image type="content" source="media/Contact_Activities2.png" alt-text="連絡先活動を構成した後の最終結果":::

## <a name="contact-level-activity-timeline-filtering"></a>連絡先レベルの活動タイムライン フィルタリング

連絡先レベルの活動マッピングを構成して実行すると、顧客の活動タイムラインが更新されます。 従事した活動の *ContactProfile* 構成に応じて、ID または名前を含みます。 タイムラインの連絡先で活動をフィルタリングして、関心のある特定の連絡先を確認できます。 さらに、**活動が取引先担当者にマップされていません** を選択すると、特定の連絡先に割り当てられていないすべての活動を表示できます。

   :::image type="content" source="media/Contact_Activities3.png" alt-text="連絡先レベルの活動で使用できるフィルタリング オプション。":::

[!INCLUDE [footer-include](includes/footer-banner.md)]
