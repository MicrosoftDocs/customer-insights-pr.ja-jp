---
title: データ統合用の顧客フィールドを統合する
description: エンティティをマージして、統合顧客プロファイルを作成します。
recommendations: false
ms.date: 05/04/2022
ms.subservice: audience-insights
ms.topic: tutorial
author: v-wendysmith
ms.author: mukeshpo
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-merge
- ci-match
- ci-relationships
- customerInsights
ms.openlocfilehash: ceb2724ad490c1ba44fd9b7ff2be04721892fca4
ms.sourcegitcommit: dca46afb9e23ba87a0ff59a1776c1d139e209a32
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/29/2022
ms.locfileid: "9081622"
---
# <a name="unify-customer-fields-for-data-unification"></a>データ統合用の顧客フィールドを統合する

[!INCLUDE [m3-prod-trial-note](includes/m3-prod-trial-note.md)]

統合プロセスのこの手順では、統合プロファイル エンティティ内でマージする属性を選択して除外します。 たとえば、3 つのエンティティに電子メール データがある場合、3 つの個別の電子メール フィールドすべてを保持するか、統合プロファイルの単一の電子メール フィールドにマージすることができます。 一部の属性は、システムによって自動的に結合されます。 安定した一意の顧客 ID を作成し、関連するプロファイルをクラスターにグループ化できます。

:::image type="content" source="media/m3_unify.png" alt-text="統合された顧客プロファイルを定義するマージされたフィールドを持つテーブルを表示するデータ統合プロセスのマージ ページ。":::

## <a name="review-and-update-the-customer-fields"></a>顧客フィールドの確認と更新

1. 表の **顧客フィールド** タブで統合されるフィールドのリストを確認します。 該当する場合は変更を加えます。

   1. 組み合わせたフィールドについては、次のことができます:
      - [編集](#edit-a-merged-field)
      - [名前の変更](#rename-fields)
      - [分離する](#separate-merged-fields)
      - [除外する](#exclude-fields)
      - [上下に移動](#change-the-order-of-fields)

   1. 単一のフィールドについては、次のことができます:
      - [フィールドの結合](#combine-fields-manually)
      - [フィールドのグループの結合](#combine-a-group-of-fields)
      - [名前の変更](#rename-fields)
      - [除外する](#exclude-fields)
      - [上下に移動](#change-the-order-of-fields)

1. オプションで、[顧客 ID 構成の生成](#configure-customer-id-generation)。

1. オプションで、[プロファイルを世帯またはクラスターにグループ化](#group-profiles-into-households-or-clusters) します。

> [!div class="nextstepaction"]
> [次の手順: 統合を確認する](review-unification.md)

### <a name="edit-a-merged-field"></a>マージされたフィールドを編集する

1. マージ フィールドを選択して、**編集** を選択します。 フィールドの結合ウィンドウが表示されます。

1. フィールドの結合、あるいはマージする方法を、次の 3 つのオプションのいずれかから指定します:
    - **重要性**: 参加フィールドに指定された重要度ランクに基づいて勝者の値を識別します。 既定のマージ オプションです。 **上/下に移動** を選択し、重要度ランキングを設定します。

      :::image type="content" source="media/importance-merge-option.png" alt-text="フィールドのマージ ダイアログの重要性オプション。":::

    - **最新**: 最新性に基づいて、勝者の値を特定します。 最新性の定義には、マージ フィールド スコープのすべての参加エンティティに日付または数値フィールドが必要となります。

      :::image type="content" source="media/recency-merge-option.png" alt-text="フィールドのマージ ダイアログの最新性オプション。":::

    - **最も古い**: 古さに基づいて、勝者の値を特定します。 最新性の定義には、マージ フィールド スコープのすべての参加エンティティに日付または数値フィールドが必要となります。

1. マージ プロセスに参加するフィールドをさらに追加できます。

1. マージしたフィールドの名前を変更することも可能です。

1. **完了** を選択して変更を適用します。

### <a name="rename-fields"></a>フィールド名の変更

マージされたフィールドまたは個別のフィールドの表示名を変更します。 出力エンティティの名前は変更できません。

1. フィールドを選択し、**名前の変更** を選択します。

1. 新しい表示名を入力します。

1. **完了** を選択します。

### <a name="separate-merged-fields"></a>マージされたフィールドの分離

マージされたフィールドを分離するには、テーブルで属性を見つけます。 分離されたフィールドは、統合された顧客プロファイルの個別のデータ ポイントとして表示されます。

1. マージされたフィールドを選択し、**個別のフィールド** を選択します。

1. 分離を確認します。

### <a name="exclude-fields"></a>フィールドを除外する

統合された顧客プロファイルからマージされたフィールドまたは個別のフィールドを除外します。 フィールドがセグメントなどの他のプロセスで使用されている場合は、顧客プロファイルから除外する前に、これらのプロセスから削除します。

1. フィールドを選択して、**除外** を選択します。

1. 除外を確認します。

除外されたすべてのフィールドのリストを表示するには、**除外されたフィールド** を選択します。 必要に応じて、除外されたフィールドを読み取ることができます。

### <a name="change-the-order-of-fields"></a>フィールドの順序の変更

一部のエンティティには、他のエンティティよりも多くの詳細が含まれています。 エンティティにフィールドに関する最新データが含まれている場合、値をマージするときに他のエンティティより優先することができます。

1. フィールドを選択します。
  
1. **上/下に移動** を選択して順序を設定するか、目的の位置にドラッグ アンド ドロップします。

### <a name="combine-fields-manually"></a>フィールドを手動で結合

分離されたフィールドを組み合わせて、マージされた属性を作成します。

1. **結合** > **フィールド** を選択します。 フィールドの結合ウィンドウが表示されます。

1. **フィールドの結合方法** ドロップダウンでマージにおける勝者のポリシーを指定します。

1. **フィールドの追加** を選択して、さらにフィールドを組み合わせます。

1. **名前** と **出力フィールド名** を指定します。

1. **完了** を選択して変更を適用します。

### <a name="combine-a-group-of-fields"></a>フィールドのグループの結合

フィールドのグループを 1 つのユニットとして扱います。 たとえば、レコードにフィールド住所 1、住所 2、都市、州、郵便番号が含まれている場合、データがより完全になると考えて、別のレコードの住所 2 にマージする必要はありません。

1. **結合** > **フィールドのグループ** を選択します。

1. **グループの順位付け** ドロップダウンでマージにおける勝者のポリシーを指定します。

1. **追加** を選択し、さらにフィールドを追加するか、フィールドにグループを追加するかを選択します。

1. 結合されたすべてのフィールドの **名前** と **出力名** を指定します。

1. フィールドのグループの **名前** を指定します。

1. **完了** を選択して変更を適用します。

## <a name="configure-customer-id-generation"></a>顧客 ID の生成を構成する

顧客 ID 値、一意の顧客プロファイル識別子を生成する方法を定義します。 データ統合プロセスのフィールド統合手順は、一意の顧客プロファイル識別子を生成します。 識別子は、データ統合プロセスの結果である *顧客* エンティティの *CustomerId* です。

*CustomerId*  は、 null 以外の 勝者 主キーの 最初 の 値のハッシュに基づいています。 これらのキーは、データ統合で使用されるエンティティから取得され、照合順序の影響を受けます。 したがって、照合順序の主エンティティで主キー値が変更されると、生成される顧客 ID が変更される可能性があります。 主キーの値 が常に同じ顧客を表すとは限りません。

安定した顧客 ID を構成することで、このような動作を回避できます。

1. **キー** タブを選択します。

1. **CustomerId** 行にカーソルを合わせ、**構成** を選択します。
   :::image type="content" source="media/customize-stable-id.png" alt-text="ID 生成のカスタマイズに使用するコントロール。":::

1. 一意の顧客 ID を構成し、より安定した最大 5 つのフィールドを選択します。 構成と一致しないレコードは、代わりにシステムが構成した ID を使用します。  

1. **完了** を選択します。

## <a name="group-profiles-into-households-or-clusters"></a>プロファイルを世帯またはクラスターにグループ化します

関連するプロファイルをクラスターにグループ化するルールを定義できます。 現在利用可能なクラスターには、家庭用クラスターとカスタム クラスターの 2 種類があります。 *Customer* エンティティにセマンティック フィールド *Person.LastName* と *Location.Address* が含まれる場合、システムは事前定義されたルールを持つ世帯を自動的に選択します。 [一致ルール](match-entities.md#define-rules-for-match-pairs)のように、独自のルールと条件を使用してクラスターを作成することもできます。

1. **詳細** > **クラスターを作成** を選択します。

   :::image type="content" source="media/create-cluster.png" alt-text="新しいクラスターを作成するためのコントロール。":::

1. **世帯** または **カスタム** クラスターを選択します。 セマンティック フィールド *Person.LastName* と *Location.Address* が *Customer* エンティティに存在する場合、世帯が自動的に選択されます。

1. クラスターの名前を入力して、**完了** を選択します。

1. **クラスター** タブを選択して、作成したクラスターを検索します。

1. クラスターを定義するためのルールと条件を指定します。

1. **完了** を選択します。 統合プロセスが完了すると、クラスターが作成されます。 クラスター識別子は、新しいフィールドとして *顧客* エンティティに追加されます。

> [!div class="nextstepaction"]
> [次の手順: 統合を確認する](review-unification.md)

[!INCLUDE [footer-include](includes/footer-banner.md)]
