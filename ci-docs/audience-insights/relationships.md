---
title: エンティティとエンティティ パスの関連付け
description: 複数のデータ ソースからエンティティ間の関連付けを作成および管理します。
ms.date: 06/01/2020
ms.reviewer: mhart
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: MichelleDevaney
ms.author: midevane
manager: shellyha
ms.openlocfilehash: 1853fcd8db2918a0b4a19fa0934e2f0ddbcf6d093c85fdf2068a13f954035dec
ms.sourcegitcommit: aa0cfbf6240a9f560e3131bdec63e051a8786dd4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/10/2021
ms.locfileid: "7035237"
---
# <a name="relationships-between-entities"></a>エンティティ間の関連付け

関連付けは、エンティティを結びつけ、エンティティが共通の識別子である外部キーを共有する場合にデータのグラフを定義します。 この外部キーは、あるエンティティから別のエンティティへ参照することができます。 接続されたエンティティにより、複数のデータ ソースに基づいたセグメントとメジャーの定義が可能になります。

関連付けには次の 3 つのタイプがあります: 
- 編集不可能なシステム定義の関連付け、データの統合プロセスの一部としてシステムによって作成
- 編集不可能な継承された関連付け、データ ソースの取り込みから自動的に作成 
- 編集可能なユーザー定義の関連付け、ユーザーが作成および構成

## <a name="non-editable-system-relationships"></a>編集不可能なシステム定義の関連付け

データの統合時に、システム定義の関連付けがインテリジェント マッチングに基づいて自動的に作成されます。 これらの関連付けは、顧客プロファイル レコードを対応するレコードと関連付けるのに役立ちます。 次の図は、3 つのシステム ベースの関連付けの作成を示しています。 顧客エンティティは他のエンティティと照合され、統合された *Customer* エンティティを生成します。

:::image type="content" source="media/relationships-entities-merge.png" alt-text="3 つの 1-n の関連付けを持つ顧客エンティティの関係パスの図。":::

- ***CustomerToContact* の関連付け** は、*Customer* エンティティと *Contact* エンティティとの間に作成されました。 *Customer* エンティティはキー フィールド **Contact_contactID** を取得し、*Contact* エンティティのキー フィールド **contactID** に関連付けます。
- ***CustomerToAccount* の関連付け** が、*Customer* エンティティと *Account* エンティティの間に作成されました。 *Customer* エンティティは、キー フィールド **Account_accountID** を取得し、*Account* エンティティのキー フィールド **accountID** と関連付けます。
- ***CustomerToWebAccount* の関連付け** が、*Customer* エンティティと *WebAccount* エンティティとの間に作成されました。 *Customer* エンティティは、キー フィールド **WebAccount_webaccountID** を取得し、*WebAccount* エンティティのキー フィールド **webaccountID** と関連付けます。

## <a name="non-editable-inherited-relationships"></a>編集不可能な継承された関連付け

データ取り込みプロセス時に、システムは既存の関連付けについてデータ ソースを確認します。 関連付けが存在しない場合、システムが自動的に作成します。 これらの関連付けは、下流プロセスでも使用されます。

## <a name="create-a-custom-relationship"></a>ユーザー定義の関連付けの作成

関連付けは、外部キーを含む *ソース エンティティ* と ソース エンティティの外部キーが指す *対象エンティティ* で構成されます。 

1. 対象者に関するインサイトで、**データ** > **関連付け** に移動します。

2. **新規リレーションシップ** を選択します。

3. **新しい関連付け** ペインで以下の情報を入力します:

   :::image type="content" source="media/relationship-add.png" alt-text="空の入力フィールドを持つ新しい関連付けサイド ペイン。":::

   - **関連付け名**: 関連付けの目的を反映する名前。 例: CustomerToSupportCase。
   - **説明**: リレーションシップの説明。
   - **ソース エンティティ**: 関連付けのソースとして使用されるエンティティ。 例: SupportCase。
   - **対象エンティティ**: 関連付けの対象として使用されるエンティティ。 例: Customer。
   - **ソースの基数**: ソース エンティティの基数を指定します。 基数は、セット内の可能な要素の数を表します。 常に対象の基数に関連します。 **一** と **多** から選択できます。 多対一および一対一のリレーションシップのみがサポートされています。  
     - 多対一: 複数のソース レコードを 1 つの対象レコードに関連付けることができます。 例: 1 人の顧客からの複数のサポート案件。
     - 一対一: 1 つのソース レコードが、1 つの対象レコードに関連付けられます。 例: 1 人の顧客に対して 1 つのロイヤルティ ID。

     > [!NOTE]
     > 多対多の関連付けは、2 つの多対一の関連付けと、ソース エンティティと対象エンティティを接続するリンク エンティティを使用して作成できます。

   - **ターゲット基数** : ターゲット エンティティ レコードの基数を選択します。 
   - **ソース キー フィールド**: ソース エンティティの外部キー フィールド。 例: SupportCase は CaseID を外部キー フィールドとして使用できます。
   - **ターゲット キー フィールド**: 対象エンティティのキー フィールド。 例 Customer は **CustomerID** キー フィールドを使用できます。

4. **保存** を選択して、ユーザー定義の関連付けを作成します。

## <a name="view-relationships"></a>関連付けの表示

関連付けページには、作成されたすべての関連付けが一覧表示されます。 各行は関係を表し、ソース エンティティ、対象エンティティ、基数の詳細も含まれます。 

:::image type="content" source="media/relationships-list.png" alt-text="関連付けページのアクション バーにある関係とオプションの一覧。":::

このページには、既存および新規の関連付けに対する一連のオプションがあります。 
- **新しい関連付け**: [ユーザー定義の関連付けの作成](#create-a-custom-relationship)。
- **ビジュアライザー**: [関連ビジュアライザーを確認](#explore-the-relationship-visualizer) して、既存の関連付けとその基数のネットワーク図を表示します。
- **フィルター**: 一覧に表示する関連付けの種類を選択します。
- **関係の検索**: 関連付けのプロパティでテキスト ベースの検索を使用します。

### <a name="explore-the-relationship-visualizer"></a>関連ビジュアライザーの確認

関連ビジュアライザーは、接続されたエンティティ間の既存の関連付けとその基数のネットワーク図を示します。 また、リレーションシップ パスを視覚化します。

ビューをカスタマイズするには、ボックスをキャンバス上でドラッグして、位置を変更します。

:::image type="content" source="media/relationship-visualizer.png" alt-text="関連するエンティティ間のつながりを含む関連ビジュアライザーのネットワーク図のスクリーンショット。":::

使用できるオプション: 
- **画像としてエクスポート**: 現在のビューを画像ファイルとして保存します。
- **水平/垂直レイアウトに変更**: エンティティと関連付けの配置を変更します。
- **編集**: 編集ペインでユーザー定義の関連付けのプロパティを更新し、変更を保存します。

### <a name="relationship-path"></a>リレーションシップ パス

リレーションシップ パスは、ソース エンティティとターゲット エンティティの間でリレーションシップに接続されているエンティティを記述します。 統合プロファイル エンティティ以外のエンティティを含むセグメント、またはメジャーを作成し、統一されたプロファイル エンティティに到達する複数のオプションがある場合に使用されます。

リレーションシップ パスは、どの関連付けを介してユニファイド プロファイル エンティティにアクセスするかをシステムに通知します。 リレーションシップ パスが異なれば、結果も異なる可能性があります。

エンティティ *eCommerce_eCommercePurchases* は、統合プロファイルの *顧客* エンティティと以下の関係にあります:

- eCommerce_eCommercePurchases > 顧客
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > 顧客
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > loyaltyScheme_loyCustomers > 顧客 

リレーションシップ パスは、メジャーやセグメントのルールを作成する際に使用できるエンティティを決定します。 一致するレコードがすべてのエンティティの一部である必要があるため、最も長いリレーションシップ パスを持つオプションを選択すると、結果が少なくなる可能性があります。 この例では、顧客は電子商取引 (eCommerce_eCommercePurchases) を通じて販売時点管理 (POS_posPurchases) で商品を購入し、当社のロイヤルティ プログラム (loyaltyScheme_loyCustomers) に参加する必要があります。 1 つ目のオプションを選択した場合、顧客は 1 つの追加されたエンティティに存在するだけでよいため、より多くの結果を得られる可能性があります。

## <a name="manage-existing-relationships"></a>既存の関連付けの管理 

関連付けページでは、各関係は行で表されます。 

関係を選択し、次のオプションのいずれかを選択します: 
 
- **編集**: 編集ペインでユーザー定義の関連付けのプロパティを更新し、変更を保存します。
- **削除**: ユーザー定義の関連付けを削除します。
- **表示**: システムで作成および継承された関連付けを表示します。 

## <a name="next-step"></a>次のステップ

システムやカスタムの関連付けを利用して、サイロ化から解き放たれた複数のデータソースに基づいて [セグメントの作成](segments.md) と [対策](measures.md) を行います。

[!INCLUDE[footer-include](../includes/footer-banner.md)]
