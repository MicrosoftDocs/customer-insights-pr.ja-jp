---
title: メジャーを作成および管理する
description: メジャーを定義して、ビジネスのパフォーマンスを分析して反映させます。
ms.date: 09/30/2021
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: wameng
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 39acca78c022bc15ebc15dc80f21fe175da04d4d
ms.sourcegitcommit: 5d82e5b808517e0e99fdfdd7e4a4422a5b8ebd5c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/11/2021
ms.locfileid: "7622976"
---
# <a name="define-and-manage-measures"></a>メジャーの定義と管理

メジャーは、顧客の行動とビジネス パフォーマンスをよりよく理解するのに役立ちます。 [統合されたプロファイル](data-unification.md) から関連する値を確認します。 たとえば、企業は、個々の顧客の購買履歴を把握するために *顧客ごとの合計支出* を確認したり、企業全体の集計レベルの収益を把握するために *会社の合計売上金額* を測定したいと考えています。  

メジャーは、さまざまな演算子と単純なマッピング オプションを備えたデータ クエリ プラットフォームであるメジャー ビルダーを使用して作成されます。 データをフィルタリングし、結果をグループ化し、[エンティティ関連パス](relationships.md)を検出して、出力をプレビューします。

メジャー ビルダーを使用して、顧客データを照会し、インサイトを抽出することによりビジネス アクティビティを計画します。 たとえば、*顧客あたりの総支出* と *顧客あたりのトータル リターン* のメジャーを作成することにより、支出は多いが収益が高い顧客のグループを特定するのに役立ちます。 [セグメントを作成](segments.md)して、次善の行動を推進できます。 

## <a name="build-your-own-measure-from-scratch"></a>独自のメジャーをゼロから構築する

このセクションでは、新しいメジャーを最初から作成する方法について説明します。 統合された顧客プロファイル エンティティに接続するように設定された関係を持つデータ エンティティからのデータ属性を使用して、メジャーを構築できます。

# <a name="individual-customers-b2c"></a>[個人消費者 (B2C)](#tab/b2c)

1. 対象者に関するインサイトで、**メジャー** に移動します。

1. **新規** を選択して、**独自に構築する** を選択します。

1. **名前の編集** を選択して、メジャーの **名前** を提供します。 

1. 構成領域で、**関数の選択** ドロップダウン メニューから集計関数を選択します。 集計関数は次のとおりです。 
   - **Sum**
   - **平均**
   - **カウント**
   - **一意の件数**
   - **Max**
   - **Min**
   - **First**: データ レコードの最初の値を取得します
   - **最終**: データ レコードに追加された最後の値を取得します

   :::image type="content" source="media/measure-operators.png" alt-text="メジャー計算の演算子。":::

1. **属性の追加** を選択して、このメジャーを作成するために必要なデータを選択します。
   
   1. **属性** タブを選択します。 
   1. データ エンティティ: 測定する属性を含むエンティティを選択します。 
   1. データ属性: メジャーを計算するために集計関数で使用する属性を選択します。 一度に選択できる属性は 1 つだけです。
   1. **メジャー** タブを選択することにより、既存のメジャーからデータ属性を選択することも、エンティティまたはメジャー名を検索することもできます。 
   1. **追加** を選択して、選択した属性をメジャーに追加します。

   :::image type="content" source="media/measure-attribute-selection.png" alt-text="計算に使用する属性を選択します。":::

1. より複雑なメジャーを作成するには、属性を追加するか、メジャー関数で数学演算子を使用します。

   :::image type="content" source="media/measure-math-operators.png" alt-text="数学演算子を使用して複雑なメジャーを作成します。":::

1. フィルターを追加するには、構成領域で **フィルター** を選択します。 
  
   1. **フィルター** ウィンドウの **属性の追加** セクションで、フィルターの作成に使用する属性を選択します。
   1. フィルター演算子を設定して、選択したすべての属性のフィルターを定義します。
   1. **適用** を選択して、フィルタ＝をメジャーに追加します。

1. ディメンションを追加するには、構成領域で **ディメンション** を選択します。 ディメンションは、メジャー出力エンティティの列として表示されます。
 
   1. **ディメンションの編集** を選択して、メジャー値をグループ化するデータ属性を追加します。 たとえば、都市や性別。 既定では、*顧客レベル メジャー* を作成するのに *CustomerID* ディメンションが選択されます。 *ビジネスレベル メジャー* を作成する場合、既定ディメンションを削除できます。
   1. **完了** を選択して、ディメンションをメジャーに追加します。

1. 整数に置き換える必要のある値がデータにある場合は、**ルール** を選択します。 ルールを構成し、置換として整数のみを選択していることを確認します。 たとえば、*null* は *0* に置換します。

1. マッピングしたデータ エンティティと *Customer* エンティティの間に複数のパスがある場合、識別された [エンティティ関連パス](relationships.md) の 1 つを選択する必要があります。 メジャー結果は、選択したパスによって異なります。 
   
   1. **関係パス** を選択し、メジャーを識別するために使用するエンティティ パスを選択します。 *Customer* エンティティへのパスが 1 つしかない場合、このコントロールは表示されません。
   1. **完了** を選択して、選択肢を適用します。 

   :::image type="content" source="media/measures-data-preferences.png" alt-text="メジャーのエンティティ パスを選択します。":::

1. メジャーの計算をさらに追加するには、**新しい計算** を選択します。 新しい計算には、同じエンティティ パス上のエンティティのみを使用できます。 メジャー出力エンティティの列として、より多くの計算が表示されます。

1. 計算で **...** を選択して、メジャーからの計算を **複製**、**名前変更**、または **削除** を行います。

1. **プレビュー** エリアには、フィルターやディメンションなど、メジャー出力エンティティのデータ スキーマが表示されます。 プレビューは、構成の変更に動的に反応します。

1. **実行** を選択して、構成されたメジャーの結果を計算します。 現在の構成を保持し、後でメジャーを実行する場合、**保存して閉じる** を選択します。

1. **メジャー** に移動して、リストで新たに作成されたメジャーを確認します。

# <a name="business-accounts-b2b"></a>[事業取引先企業 (B2B)](#tab/b2b)

1. 対象者に関するインサイトで、**メジャー** に移動します。

1. **新規** を選択して、**独自に構築する** を選択します。

1. **名前の編集** を選択して、メジャーの **名前** を提供します。 

1. 構成領域で、**関数の選択** ドロップダウン メニューから集計関数を選択します。 集計関数は次のとおりです。 
   - **Sum**
   - **平均**
   - **カウント**
   - **一意の件数**
   - **Max**
   - **Min**
   - **First**: データ レコードの最初の値を取得します
   - **最終**: データ レコードに追加された最後の値を取得します

   :::image type="content" source="media/measure-operators.png" alt-text="メジャー計算の演算子。":::

1. **属性の追加** を選択して、このメジャーを作成するために必要なデータを選択します。
   
   1. **属性** タブを選択します。 
   1. データ エンティティ: 測定する属性を含むエンティティを選択します。 
   1. データ属性: メジャーを計算するために集計関数で使用する属性を選択します。 一度に選択できる属性は 1 つだけです。
   1. **メジャー** タブを選択することにより、既存のメジャーからデータ属性を選択することも、エンティティまたはメジャー名を検索することもできます。 
   1. **追加** を選択して、選択した属性をメジャーに追加します。

   :::image type="content" source="media/measure-attribute-selection.png" alt-text="計算に使用する属性を選択します。":::

1. より複雑なメジャーを作成するには、属性を追加するか、メジャー関数で数学演算子を使用します。

   :::image type="content" source="media/measure-math-operators.png" alt-text="数学演算子を使用して複雑なメジャーを作成します。":::

1. フィルターを追加するには、構成領域で **フィルター** を選択します。 
  
   1. **フィルター** ウィンドウの **属性の追加** セクションで、フィルターの作成に使用する属性を選択します。
   1. フィルター演算子を設定して、選択したすべての属性のフィルターを定義します。
   1. **適用** を選択して、フィルタ＝をメジャーに追加します。

1. ディメンションを追加するには、構成領域で **ディメンション** を選択します。 ディメンションは、メジャー出力エンティティの列として表示されます。
 
   1. **ディメンションの編集** を選択して、メジャー値をグループ化するデータ属性を追加します。 たとえば、都市や性別。 既定では、*顧客レベル メジャー* を作成するのに *CustomerID* ディメンションが選択されます。 *ビジネスレベル メジャー* を作成する場合、既定ディメンションを削除できます。
   1. **完了** を選択して、ディメンションをメジャーに追加します。

1. 整数に置き換える必要のある値がデータにある場合は、**ルール** を選択します。 ルールを構成し、置換として整数のみを選択していることを確認します。 たとえば、*null* は *0* に置換します。

1. [階層のあるアカウントを使用する](relationships.md#set-up-account-hierarchies)場合、**サブアカウントをロールアップする** トグルを使用できます。
   - **オフ** に設定されている場合、メジャーはすべてのアカウントに対して計算されます。 すべてのアカウントが独自の結果を取得します。
   - **オン** に設定されている場合、**編集** を選択して、取り込んだ階層に従ってアカウント階層を選択します。 メジャーはサブアカウントで集計されるため、結果は 1 つだけになります。

1. マッピングしたデータ エンティティと *Customer* エンティティの間に複数のパスがある場合、識別された [エンティティ関連パス](relationships.md) の 1 つを選択する必要があります。 メジャー結果は、選択したパスによって異なります。 
   
   1. **関係パス** を選択し、メジャーを識別するために使用するエンティティ パスを選択します。 *Customer* エンティティへのパスが 1 つしかない場合、このコントロールは表示されません。
   1. **完了** を選択して、選択肢を適用します。 

   :::image type="content" source="media/measures-data-preferences.png" alt-text="メジャーのエンティティ パスを選択します。":::

1. 計算で **...** を選択して、メジャーからの計算を **複製**、**名前変更**、または **削除** を行います。

1. **プレビュー** エリアには、フィルターやディメンションなど、メジャー出力エンティティのデータ スキーマが表示されます。 プレビューは、構成の変更に動的に反応します。

1. **実行** を選択して、構成されたメジャーの結果を計算します。 現在の構成を保持し、後でメジャーを実行する場合、**保存して閉じる** を選択します。

1. **メジャー** に移動して、リストで新たに作成されたメジャーを確認します。

---

## <a name="use-a-template-to-build-a-measure"></a>テンプレートを使用してメジャーを作成する

一般的に使用されるメジャーの定義済みテンプレートを使用して、それらを作成できます。 テンプレートの詳細な説明とガイド付きのエクスペリエンスは、効率的なメジャーの作成に役立ちます。 テンプレートは、*Unified Activity* エンティティからマップされたデータに基づいて構築されます。 したがって、テンプレートからメジャーを作成する前に、[顧客活動](activities.md) を構成していることを確認します。

# <a name="individual-customers-b2c"></a>[個人消費者 (B2C)](#tab/b2c)

一般的に使用されるメジャーの定義済みテンプレートを使用して、それらを作成できます。 テンプレートの詳細な説明とガイド付きのエクスペリエンスは、効率的なメジャーの作成に役立ちます。 テンプレートは、*Unified Activity* エンティティからマップされたデータに基づいて構築されます。 したがって、テンプレートからメジャーを作成する前に、[顧客活動](activities.md) を構成していることを確認します。

使用できるメジャー テンプレート: 
- 平均取引値 (ATV)
- 合計取引値
- 日別平均売上
- 年別平均売上
- 取引回数
- 獲得したロイヤルティ ポイント
- 引き換え済みのロイヤルティ ポイント
- ロイヤルティ ポイントの残高
- アクティブな顧客ライフスパン
- ロイヤルティ メンバーシップの期間
- 最後の購入以降の時間

次の手順では、テンプレートを使用して新しいメジャーを作成する手順の概要を示します。

1. 対象者に関するインサイトで、**メジャー** に移動します。

1. **新規** を選択し、**テンプレートを選択** を選択します。

   :::image type="content" source="media/measure-use-template.png" alt-text="テンプレートを強調表示して新しいメジャーを作成する際のドロップダウン メニューのスクリーンショット。":::

1. ニーズに最適なテンプレートを検索し、**テンプレートを選択** を選択します。

1. すべてのデータが揃っている場合、必要なデータを確認して、**開始する** を選択します。

1. **名前の編集** ペインで、メジャーと出力エンティティの名前を設定します。 

1. **完了** を選択します。

1. **期間の設定** セクションで、使用するデータの概算時間を定義します。 **すべての時間** を選択して新しいメジャーをデータセット全体に適用するか、メジャーを **特定の期間** にフォーカスするかどうかを選択します。

   :::image type="content" source="media/measure-set-time-period.png" alt-text="テンプレートからメジャーを構成するときの期間セクションを示すスクリーンショット。":::

1. 次のセクションで、**データの追加** を選択し、活動を選択して、*Unified Activity* エンティティから対応するデータをマップします。

    1. ステップ 1/2: **活動の種類** の下にある、使用するエンティティの種類を選択します。 **活動** でマップするエンティティを選択します。
    1. ステップ 2/2: 計算式に必要なコンポーネントの *Unified Activity* エンティティから属性を選択します。 たとえば、平均取引値の場合は、取引値を表す属性です。 **活動のタイムスタンプ** で、活動の日時を表す属性を Unified Activity エンティティから選択します。
   
1. データ マッピングが成功すると、状態が **完了** と表示され、マップされた活動と属性の名前が表示されます。

   :::image type="content" source="media/measure-template-configured.png" alt-text="完了したメジャー テンプレート構成のスクリーンショット。":::

1. **実行** を選択してメジャーの結果を計算できるようになりました。 後で調整するには、**下書きの保存** を選択します。

# <a name="business-accounts-b2b"></a>[事業取引先企業 (B2B)](#tab/b2b)

この機能は、個々の顧客がプライマリ ターゲット対象ユーザーである環境で作成されたメジャーでのみ使用できます。

---

## <a name="manage-your-measures"></a>メジャーの管理

メジャーのリストは、**メジャー** ページにあります。

メジャー タイプ、作成者、作成日、ステータス、および状態に関する情報が表示されます。 リストからメジャーを選択すると、出力をプレビューして CSV ファイルをダウンロードできます。

すべてのメジャーを同時に更新するには、特定のメジャーを選択せずに **すべて更新** を選択します。

> [!div class="mx-imgBorder"]
> ![単一のメジャーを管理するためのアクション。](media/measure-actions.png "単一のメジャーを管理するためのアクション。")

次のオプションのリストからメジャーを選択します。

- メジャー名を選択して詳細を表示します。
- メジャーの構成を **編集** します。
- 最新のデータに基づいて、メジャーを **更新** します。
- メジャーの **名前を変更** します。
- メジャーを **削除** します。
- **アクティブ化** または **非アクティブ化** します。 非アクティブなメジャーは、[スケジュールされた更新](system.md#schedule-tab)中に更新されません。

> [!TIP]
> タスク/プロセスには、[6 種類の状態](system.md#status-types) があります。 さらに、ほとんどのプロセスは、[その他の下流プロセスに依存します](system.md#refresh-policies)。 プロセスのステータスを選択して、ジョブ全体の進行状況の詳細を確認できます。 ジョブのタスクで **詳細を見る** を選択すると、処理時間、最終処理日、タスクに関連するすべてのエラーと警告などの追加情報が表示されます。

## <a name="next-step"></a>次のステップ

既存のメジャーを使用して、[顧客セグメント](segments.md)を作成できます。

[!INCLUDE[footer-include](../includes/footer-banner.md)]
