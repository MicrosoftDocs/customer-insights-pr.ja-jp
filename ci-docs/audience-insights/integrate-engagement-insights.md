---
title: エンゲージメント インサイトからの Web データを対象者インサイトと統合する
description: エンゲージメント インサイトから対象者インサイトまで顧客に関する Web 情報を提供します。
ms.date: 12/17/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: mukeshpo
ms.author: mukeshpo
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 9a4cb77bb4c6ef0d88b3f00802f66baab5520a07
ms.sourcegitcommit: aaa275c60c0c77c88196277b266a91d653f8f759
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/14/2021
ms.locfileid: "5896425"
---
# <a name="integrate-web-data-from-engagement-insights-with-audience-insights"></a>エンゲージメント インサイトからの Web データを対象者インサイトと統合する

顧客は多くの場合、Web サイトを使用してオンラインで日常的なトランザクションを行います。 Dynamics 365 Customer Insights のエンゲージメント インサイト機能は、Web データをソースとして統合するための便利なソリューションです。 トランザクション、人口統計、または行動データに加えて、統一された顧客プロファイルで Web 上のアクティビティを確認できます。 このプロファイルを使用して、対象者をアクティブ化するためのセグメント、メジャー、予測などのその他のインサイトを得ることができます。

この記事では、エンゲージメント インサイトから既存の対象者インサイト環境に顧客の Web アクティビティ データを取り込む手順について説明します。

この例では、統一された顧客プロファイルを含む環境を想定しています。 プロファイルは、調査、小売販売、およびチケット システムからのソースと統合されています。 また、顧客の関連アクティビティも表示されます。 

ここで、顧客が当社の Web プロパティにアクセスして、そのアクティビティを理解しているかどうかを確認したいと思います。 アクティビティには、たとえば、メールで受信したリンクから Web サイトにアクセスしたり製品ページを表示したりすることが含まれます。

## <a name="prerequisites"></a>前提条件

エンゲージメント インサイトからのデータを統合するには、いくつかの前提条件を満たす必要があります。 

- エンゲージメント インサイト SDK を Web サイトに統合します。 詳細については、[Web SDK を開始する](../engagement-insights/instrument-website.md)を参照してください。
- エンゲージメント インサイトから Web イベントをエクスポートするには、Web イベントデータを対象者インサイトに取り込むために使用される ADLS Gen 2 ストレージ アカウントにアクセスする必要があります。 詳細については、[イベントのエクスポート](../engagement-insights/export-events.md)を参照してください。

## <a name="configure-refined-events-in-engagement-insights"></a>エンゲージメント インサイトで詳細なイベントを構成する

管理者がエンゲージメント インサイト SDK を使用して Web サイトをインストルメント化した後、ユーザーが Web ページを表示したり、どこかをクリックすると、*ベース イベント* が収集されます。 基本イベントには多くの詳細が含まれる傾向があります。 ユース ケースに応じて、基本イベントにはデータのサブセットのみが必要です。 エンゲージメント インサイトでは、選択した基本イベントのプロパティのみが含まれる *詳細なイベント* を作成できます。     

詳しくは、[詳細なイベントを作成および変更する](../engagement-insights/refined-events.md)を参照してください。

詳細なイベントを作成する際の考慮事項: 

- 詳細なイベントには意味のある名前を付けます。 対象者インサイトでアクティビティ名として使用されます。
- 対象者インサイトでアクティビティを作成するには、少なくとも次のプロパティを選択してください。 
    - Signal.Action.Name - アクティビティの詳細を示します
    - Signal.User.Id - 顧客 ID でマッピングするために使用されます
    - Signal.View.Uri - セグメントまたはメジャーの基礎となる Web アドレスとして使用されます
    - Signal.Export.Id - イベントの主キーとして使用します
    - Signal.Timestamp - アクティビティの日時を決定します

フィルターを選択して、ユース ケースにとって重要なイベントとページに焦点を合わせます。 この例では、「メール プロモーション」というアクション名を使用します。

## <a name="export-the-refined-web-events"></a>詳細な Web イベントをエクスポートする 

詳細なイベントを定義した後、イベント データの Azure Data Lake Storage へのエクスポートを構成する必要があります、これは、対象者インサイトで取り込むためのデータ ソースとして設定できます。 イベントが Web プロパティから流れるのと平行して、エクスポートは常時発生します。

詳細については、[イベントのエクスポート](../engagement-insights/export-events.md)を参照してください。

## <a name="ingest-event-data-to-audience-insights"></a>イベント データを対象者インサイトに取り込む

詳細なイベントを定義し、そのエクスポートを構成したので、次にデータを対象者インサイトに取り込みます。 Common Data Model フォルダーに基づいて新しいデータ ソースを作成する必要があります。 イベントのエクスポート先であるストレージ アカウントの詳細を入力します。 *default.cdm.json* ファイルで、詳細なイベントを選択して取り込み、対象者インサイトでエンティティを作成します。

詳細については、[Azure Data Lake アカウントを使用して Common Data Model フォルダーに接続する](connect-common-data-model.md)を参照してください


## <a name="relate-refined-event-data-as-an-activity-of-a-customer-profile"></a>詳細なイベント データを顧客プロファイルのアクティビティとして関連付けます

エンティティの取り込みが完了したら、顧客プロファイルのアクティビティを設定できます。

詳細については、[顧客アクティビティ](activities.md) を参照してください。

:::image type="content" source="media/web-event-activity.png" alt-text="アクティビティの編集ペインが展開され、フィールドに値が入力されたアクティビティ ページ。":::

次のマッピングを使用して新しいアクティビティを構成します。 

- **主キー:** Signal.Export.Id、エンゲージメント インサイトのすべてのイベント レコードで使用できる一意の ID。 このプロパティは自動的に生成されます。

- **タイムスタンプ:** イベント プロパティの Signal.Timestamp。

- **イベント:** 追跡するイベント名である Signal.Name。

- **Web アドレス:** イベントを作成したページの URI を参照する Signal.View.Uri。

- **詳細:** イベントに関連付ける情報を表す Signal.Action.Name。 このケースで選択されたプロパティは、イベントがメール プロモーション用であることを示しています。

- **アクティビティ タイプ:** この例では、既存のアクティビティ タイプである WebLog を選択します。 この選択は、予測モデルを実行したり、このアクティビティ タイプに基づいてセグメントを作成したりするための便利なフィルター オプションです。

- **関係を設定する:** この重要な設定では、アクティビティを既存の顧客プロファイルに関連付けます。 **Signal.User.Id** は、収集される SDK で構成された識別子であり、対象者インサイトで構成された他のデータ ソースのユーザー ID に関連しています。 この例では、Signal.User.Id と RetailCustomers:CustomerRetailId の間の関係を構成します。これは、データ統合プロセスのマップ ステップで定義された主キーです。


アクティビティを処理した後、顧客レコードを確認し、顧客カードを開いて、タイムラインのエンゲージメント インサイトからアクティビティを確認できます。 

> [!TIP]
> エンゲージメント インサイト アクティビティがある顧客 ID を見つけるには、**エンティティ** に移動して、UnifiedActivity エンティティのデータをプレビューします。 ActivityTypeDisplay = WebLog には、上記の例で構成されたエンゲージメント インサイト アクティビティが含まれています。 これらのレコードの 1 つとその ID の顧客 ID を **顧客** ページにコピーします。

## <a name="next-steps"></a>次のステップ

これで、[セグメント](segments.md)、[メジャー](measures.md)、および[予測](predictions.md)を作成して、顧客と有意義な関係を築くことができます。


[!INCLUDE[footer-include](../includes/footer-banner.md)]