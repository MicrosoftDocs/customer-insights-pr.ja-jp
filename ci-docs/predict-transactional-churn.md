---
title: トランザクション チャーンの予測 (ビデオを含む)
description: 顧客が製品やサービスを購入しなくなるリスクがあるかどうかを予測します。
ms.date: 01/13/2022
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: how-to
author: zacookmsft
ms.author: zacook
manager: shellyha
ms.openlocfilehash: b8216b5a739964fdfff8cad7e6d6d7ce3f5308b5
ms.sourcegitcommit: 8a28e9458b857adf8e90e25e43b9bc422ebbb2cd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/18/2022
ms.locfileid: "9171101"
---
# <a name="transaction-churn-prediction"></a>トランザクション離反の予測

トランザクション解約予測は、顧客が特定の時間枠内に製品またはサービスを購入しなくなるかどうかを予測するのに役立ちます。 **インテリジェンス** > **予測** で新しい解約予測を作成できます。 作成済みの予測を確認するには、**自分の予測** を選択します。 

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RWN6Eg]

ビジネス アカウントに基づく環境では、取引先企業のトランザクション離反、および取引先企業と製品カテゴリなどの別のレベルの情報の組み合わせを予測できます。 ディメンションを追加すると、取引先企業「Contoso」が製品カテゴリ「オフィス文房具」の購入を停止する可能性を確認するのに役立ちます。 さらに、ビジネス アカウントの場合、AI を使用して、取引先企業がセカンダリレベルの情報のカテゴリで離反する可能性が高い潜在的な理由のリストを生成することもできます。

> [!TIP]
> サンプル データを使用して、トランザクション離反予測のチュートリアルを試してください: [トランザクション離反予測サンプル ガイド](sample-guide-predict-transactional-churn.md)。

## <a name="prerequisites"></a>前提条件

# <a name="individual-consumers-b-to-c"></a>[個人消費者 (B2C)](#tab/b2c)

- 少なくとも Customer Insights の[共同作成者権限](permissions.md) があること。
- ビジネスにとっての解約の意味を理解するためのビジネス知識。 時間ベースの解約定義をサポートします。つまり、顧客は購入がない期間の後に解約したと見なされます。
- トランザクション/購入とその履歴に関するデータ:
    - 購入/トランザクションを区別するためのトランザクション識別子。
    - トランザクションを顧客に一致させるための顧客 ID。
    - トランザクションが発生した日付を定義するトランザクション イベントの日付。
    - 購入/トランザクションのセマンティック データ スキーマには、次の情報が必要です:
        - **トランザクション ID**: 購入またはトランザクションの一意識別子。
        - **トランザクションの日付** :購入またはトランザクションの日付。
        - **トランザクションの値** :トランザクション/品目の通貨/数値。
        - (オプション) **一意の製品 ID** :データが品目レベルの場合に購入した製品またはサービスの ID。
        - (オプション) **このトランザクションが返品であったかどうか** :トランザクションが返品であったかどうかを識別する true/false フィールド。 **トランザクションの値** がマイナスの場合、この情報を使用して返品を推測します。
- (オプション) 顧客活動に関するデータ:
    - 同じタイプのアクティビティを区別するアクティビティの識別子。
    - アクティビティを顧客にマッピングする顧客の識別子。
    - アクティビティの名前と日付を含むアクティビティ情報。
    - 顧客活動の意味論的データ スキーマには次のものが含まれます :
        - **主キー :** アクティビティの一意の識別子。 たとえば、Web サイトへのアクセスや、顧客が製品のサンプルを試したことを示す使用記録などです。
        - **タイムスタンプ :** 主キーで識別されるイベントの日時。
        - **イベント :** 使用するイベントの名前。 たとえば、食料品店の "UserAction" というフィールドは、顧客が使用するクーポンである可能性があります。
        - **詳細 :** イベントの詳細情報。 たとえば、食料品店の "CouponValue" というフィールドは、クーポンの通貨値である可能性があります。

# <a name="business-accounts-b-to-b"></a>[事業取引先企業 (B2B)](#tab/b2b)

- 少なくとも Customer Insights の[共同作成者権限](permissions.md) があること。
- ビジネスにとっての解約の意味を理解するためのビジネス知識。 時間ベースの解約定義をサポートします。つまり、顧客は購入がない期間の後に解約したと見なされます。
- トランザクション/購入とその履歴に関するデータ:
    - 購入/トランザクションを区別するためのトランザクション識別子。
    - トランザクションを顧客に一致させるための顧客 ID。
    - トランザクションが発生した日付を定義するトランザクション イベントの日付。
    - 購入/トランザクションのセマンティック データ スキーマには、次の情報が必要です:
        - **トランザクション ID**: 購入またはトランザクションの一意識別子。
        - **トランザクションの日付** :購入またはトランザクションの日付。
        - **トランザクションの値** :トランザクション/品目の通貨/数値。
        - (オプション) **一意の製品 ID** :データが品目レベルの場合に購入した製品またはサービスの ID。
        - (オプション) **このトランザクションが返品であったかどうか** :トランザクションが返品であったかどうかを識別する true/false フィールド。 **トランザクションの値** がマイナスの場合、この情報を使用して返品を推測します。
- (オプション) 顧客活動に関するデータ:
    - 同じタイプのアクティビティを区別するアクティビティの識別子。
    - アクティビティを顧客にマッピングする顧客の識別子。
    - アクティビティの名前と日付を含むアクティビティ情報。
    - 顧客活動の意味論的データ スキーマには次のものが含まれます :
        - **主キー :** アクティビティの一意の識別子。 たとえば、Web サイトへのアクセスや、顧客が製品のサンプルを試したことを示す使用記録などです。
        - **タイムスタンプ :** 主キーで識別されるイベントの日時。
        - **イベント :** 使用するイベントの名前。 たとえば、食料品店の "UserAction" というフィールドは、顧客が使用するクーポンである可能性があります。
        - **詳細 :** イベントの詳細情報。 たとえば、食料品店の "CouponValue" というフィールドは、クーポンの通貨値である可能性があります。
- (オプション) 顧客に関するデータ:
    - このデータは、モデルが最高のパフォーマンスを発揮するように、より静的な属性に向けて位置を合わせる必要があります。
    - 顧客データのセマンティック データ スキーマには、次のものが含まれます。
        - **CustomerID:** 顧客の一意の識別子。
        - **作成日:** 顧客が最初に追加された日付。
        - **州または県:** 顧客の州または県の場所。
        - **国:** 顧客の国。
        - **業界:** 顧客の業種。 たとえば、コーヒー焙煎業者の場合の「業界」というフィールドでは、顧客が小売店であるかどうかを示している場合があります。
        - **分類:** ビジネスのための顧客の分類。 たとえば、コーヒー焙煎業者の「ValueSegment」というフィールドは、顧客のサイズに基づく顧客の層である可能性があります。

---

- 推奨されるデータ特性:
    - 十分な履歴データ: 選択した時間枠の少なくとも 2 倍のトランザクション データ。 できれば、2年〜3年の取引履歴。 
    - 顧客ごとの複数の購入: 顧客ごとに少なくとも 2 つのトランザクションが理想的です。
    - 顧客数: 少なくとも 10 人の顧客プロファイル、1,000 人を超える一意の顧客が望ましい。 モデルは、顧客が 10 人未満で、履歴データが不十分な場合に失敗します。
    - データの完全性: 提供されたエンティティのデータ フィールドで不足値の 20% 未満。

> [!NOTE]
> 顧客の購入頻度が高いビジネス (数週間ごと) の場合は、より短い予測ウィンドウと離反定義を選択することをお勧めします。 購入頻度が低い (数か月ごとまたは年に 1 回) 場合は、より長い予測ウィンドウと離反定義を選択します。

## <a name="create-a-transaction-churn-prediction"></a>トランザクション離反の予測を作成する

1. Customer Insights で、**インテリジェンス** > **予測** に移動します。

1. **顧客離反モデル** タイルをを選択し、**このモデルを使用する** を選択します。

1. **顧客離反モデル** ペインで、**トランザクション** および **開始する** を選択します。

:::image type="content" source="media/select-transaction-churn.PNG" alt-text="[顧客離反モデル] ペインでトランザクション オプションを選択したスクリーンショット。":::
 
### <a name="name-model"></a>モデルに名前を付ける

1. モデルにはその他と区別できるような名前を付けてください。

1. 出力エンティティの名前には、スペースを含まない文字と数字のみを使用してください。 この名前を、モデル エンティティが使用します。 

1. **次へ** を選択します。

### <a name="define-customer-churn"></a>顧客離反の定義

1. **予測ウィンドウ** を設定する。 たとえば、今後 90 日間の顧客の解約リスクを予測して、マーケティング保持の取り組みに合わせます。 解約リスクを長い期間または短い期間で予測すると、解約リスク プロファイルの要因に対処することがより困難になる可能性がありますが、それは特定のビジネス要件によって異なります。
   >[!TIP]
   > いつでも **下書きを保存** を選択して予測をドラフトとして保存できます。 予測ドラフトは **自分の予測** タブをで続きを見ることができます。

1. チャーンを定義する日数を **チャーンの定義** フィールドに入力します。 たとえば、顧客が過去 30 日間に一度も購入していない場合、ビジネスに対して解約されたと見なされる可能性があります。 

1. **次へ** を選んで続行します。

### <a name="add-required-data"></a>必須データの追加

1. **データの追加** を選択し、サイド ペインで必要な取引や購入履歴の情報を含むアクティビティ タイプを選択します。

1. **アクティビティを選択** で、計算に焦点を当てる選択したアクティビティ タイプから特定のアクティビティを選択します。

   :::image type="content" source="media/transaction-churn-select-activity.PNG" alt-text="セマンティック タイプの配下で特定の活動を選択した状態のを示すサイド ペイン。":::

   アクティビティをセマンティック タイプにマッピングしていない場合は、**編集** を選択してマッピングをします。 セマンティック アクティビティをマッピングするガイド付きエクスペリエンスが開きます。 選択した活動タイプの対応するフィールドにデータをマッピングします。

1. セマンティックの属性を、モデルの実行に必要なフィールドにマッピングします。 以下のフィールドが入力されていない場合は、購入履歴エンティティから *顧客* エンティティへの関係を構成します。 **保存** を選びます。

1. **必要なデータを追加する** 手順で、これ以上アクティビティを追加したくない場合は、**次へ** を選択して続行します。


# <a name="individual-consumers-b-to-c"></a>[個人消費者 (B2C)](#tab/b2c)

### <a name="add-additional-data-optional"></a>データの追加 (オプション)

顧客活動エンティティから *顧客* エンティティへの関係を構成します。

1. 顧客活動テーブルで顧客を識別する フィールドを選択します。 これは、*顧客* エンティティのプライマリ 顧客 ID に直接関連付けることができます。

1. プライマリの *Customer* エンティティであるエンティティを選択します。

1. 関係性を説明する名前を入力します。

#### <a name="customer-activities"></a>顧客活動

1. 必要に応じて、**顧客活動** の **データの追加** を選択します。

1. 使用するデータを含むセマンティック活動タイプを選択してから、**活動** セクションで 1 つ以上のアクティビティを選択します。

1. 構成した顧客活動のタイプに一致する活動タイプを選択します。 **新規作成** を作成して、利用可能な活動の種類を選択するか、新しい種類を作成します。

1. **次へ** を選択してから、**保存** を選択します。

1. 他にも顧客活動がある場合は、上記の手順を繰り返します。

# <a name="business-accounts-b-to-b"></a>[事業取引先企業 (B2B)](#tab/b2b)

### <a name="select-prediction-level"></a>予測レベルを選択する

ほとんどの予測は顧客レベルで作成されます。 状況によっては、粒度がビジネス ニーズに対応するのに十分ではない場合があります。 この機能を使用して、たとえば、顧客全体ではなく、顧客の支店の離反を予測できます。

1. 顧客よりも詳細なレベルで予測を作成するには、**セカンダリ レベルのエンティティを選択する** を選択します。 オプションが利用できない場合は、前のセクションを完了していることを確認してください。

1. セカンダリ レベルを選択するエンティティを展開するか、検索フィルタ ボックスを使用して選択したオプションをフィルタリングします。

1. セカンダリ レベルとして使用する属性を選択して、**追加** を選択します。

1. **次へ** を選択します。

> [!NOTE]
> このセクションで使用可能なエンティティが表示されるのは、前のセクションで選択したエンティティとリレーションシップがあるためです。 追加するエンティティが表示されない場合は、**リレーションシップ** に有効な関係が存在することを確認してください。 この構成に対しては、一対一および多対一のリレーションシップのみが有効です。

### <a name="add-additional-data-optional"></a>データの追加 (オプション)

顧客活動エンティティから *顧客* エンティティへの関係を構成します。

1. 顧客活動テーブルで顧客を識別する フィールドを選択します。 これは、*顧客* エンティティのプライマリ 顧客 ID に直接関連付けることができます。

1. プライマリの *Customer* エンティティであるエンティティを選択します。

1. 関係性を説明する名前を入力します。

#### <a name="customer-activities"></a>顧客活動

1. 必要に応じて、**顧客活動** の **データの追加** を選択します。

1. 使用するデータを含むセマンティック活動タイプを選択してから、**活動** セクションで 1 つ以上のアクティビティを選択します。

1. 構成した顧客活動のタイプに一致する活動タイプを選択します。 **新規作成** を作成して、利用可能な活動の種類を選択するか、新しい種類を作成します。

1. **次へ** を選択してから、**保存** を選択します。

1. 他にも顧客活動がある場合は、上記の手順を繰り返します。

#### <a name="customers-data"></a>顧客データ

1. オプションで、**顧客データ** に対して **データを追加する** を選択します。

1. 識別されたとおりに、セマンティック属性を独自の顧客データのフィールドにマップします。 モデルの最高のパフォーマンスを実現するために、使用されるフィールドのデータは頻繁に変更しないでください。 たとえば、毎月変更される「分類」のフィールドを選択すると、予測パターンを構築するときに過去に同じ値が顧客に該当しない場合でも、予測で使用される最後の値のみが使用されます。

1. **次へ** を選択します。

### <a name="provide-an-optional-list-of-benchmark-accounts"></a>ベンチマーク アカウントのオプションのリストを提供します

ベンチマークとして使用するビジネス顧客とアカウントのリストを追加します。 離反スコアと、離反への影響力が最大である機能予測を含む[これらのベンチマーク アカウントの詳細](#review-a-prediction-status-and-results)が表示されます。

1. **+ 顧客の追加** を選択します。

1. ベンチマークとして機能する顧客を選択します。

1. **次へ** を選んで続行します。

---

### <a name="set-schedule-and-review-configuration"></a>スケジュールの設定と構成のレビュー

1. モデルの再トレーニングを実施する頻度を設定します。 この設定は、新しいデータが取り込まれるときに、予測の精度を更新するために重要です。 多くの企業は、月に1度再トレーニングして、予測の精度を高めることができます。

1. **次へ** を選択します。

1. 予測の構成を確認します。 表示された値の下で **編集** を選択すると、前の手順に戻ることができます。 または、進行状況のインジケーターから構成のステップを選択できます。

1. すべての値が正しく構成されている場合は、**保存して実行する** を選択して予測プロセスを開始します。 **自分の予測** タブで、予測の状態を確認できます。 予測で使用されるデータの量によっては、プロセスの完了までに数時間かかる場合があります。

## <a name="review-a-prediction-status-and-results"></a>予測の状態と結果を確認する

1. **インテリジェンス** > **予測** に移動し、**自分の予測** タブを選択します。

1. レビューする予測を選択します。
   - **予測名**: 作成時に提供された予測の名前。
   - **予測の種類**: 予測に使用されるモデルの種類
   - **出力エンティティ**: 予測の結果を保管するエンティティの名前。 **データ** > **エンティティ** で、この名前を持つエンティティを見つけることができます。
     出力エンティティでは、*ChurnScore* は離反の予測確率であり、*IsChurn* は *ChurnScore* に基づく 0.5 のしきい値を持つバイナリ ラベルです。 既定のしきい値は、ユーザーのシナリオでは機能しない場合があります。 任意のしきい値で [新しいセグメントを作成](segments.md#create-a-segment) します。
     すべての顧客が必ずしもアクティブな顧客であるとは限りません。 中には、長い間活動をしておらず、離反定義に基づいて、すでに離反していると考えられる顧客もいます。 すでに離反している顧客の離反リスクを予測することは、関心対象ユーザーではないため有用ではありません。
   - **予測フィールド** :このフィールドは、一部の種類の予測に対してのみ入力され、離反予測では使用されません。
   - **状態**: 予測実行の状態。
        - **キュー** :予測は、他のプロセスが実行されるのを待っています。
        - **更新** :予測は現在、実行されており、出力エンティティに流れ込む結果を生成します。
        - **失敗**: 予測の実行に失敗しました。 詳細については、[ログを確認](manage-predictions.md#troubleshoot-a-failed-prediction) します。
        - **成功**: 予測は成功しました。 省略記号配下の **表示** を選択して予測を確認します
   - **編集日**: 予測の構成が変更された日付。
   - **最終更新日**: 予測結果が出力エンティティで更新された日付。

1. 予測の横にある縦の省略記号を選択して、確認する結果の **表示** を選択します。

   :::image type="content" source="media/model-subs-view.PNG" alt-text="コントロールを表示して、予測の結果を確認します。":::

# <a name="individual-consumers-b-to-c"></a>[個人消費者 (B2C)](#tab/b2c)

1. 結果ページには、3つの主要なデータ セクションがあります。
   - **トレーニング モデルのパフォーマンス** :使用可能なスコアは A、B、C です。 このスコアは予測のパフォーマンスを示し、出力エンティティに格納されている結果を使用するかどうかの決定に役立ちます。 スコアは次のルールに基づいて決定されます : 
        - **A** モデルが予測全体の少なくとも 50% を正確に予測した場合、および解約した顧客の正確な予測の割合がベースライン率より少なくとも 10% 大きい場合。
            
        - **B** モデルが予測全体の少なくとも 50% を正確に予測した場合、および解約した顧客の正確な予測の割合がベースラインより最大 10% 大きい場合。
            
        - **C** モデルが予測全体の 50% 未満を正確に予測した場合、または解約した顧客の正確な予測の割合がベースラインより少ない場合。
               
        - **ベースライン** は、モデルの予測時間枠の入力 (たとえば、1 年) を取得し、モデルは、1 か月以下に達するまで 2 で割ることにより、さまざまな時間の割合を作成します。 これらの割合を使用して、この期間に購入していない顧客向けのビジネス ルールを作成します。 これらの顧客は解約されたと見なされます。 誰が解約するかを予測する最も高い能力を持つ時間ベースのビジネス ルールが、ベースライン モデルとして選択されます。
            
    - **離反の可能性 (顧客数)** :離反の予測リスクに基づく顧客のグループ。 このデータは、解約のリスクが高い顧客のセグメントを作成する場合に役立ちます。 このようなセグメントは、セグメント メンバーの停止がどこにあるべきかを理解するのに役立ちます。
       
    - **最も影響力のある要因** :予測を作成する際には、様々な要素が考慮されています。 各因子には、モデルが作成する集計された予測に対して計算された重要度があります。 これらの要素を使用して、予測の結果を検証するか、後でこの情報を使用して顧客の離反リスクに影響を与えうる[セグメントを作成する](segments.md)ことができます。


# <a name="business-accounts-b-to-b"></a>[事業取引先企業 (B2B)](#tab/b2b)

1. 結果ページには、3つの主要なデータ セクションがあります。
   - **トレーニング モデルのパフォーマンス** :使用可能なスコアは A、B、C です。 このスコアは予測のパフォーマンスを示し、出力エンティティに格納されている結果を使用するかどうかの決定に役立ちます。 スコアは次のルールに基づいて決定されます : 
        - **A** モデルが予測全体の少なくとも 50% を正確に予測した場合、および解約した顧客の正確な予測の割合がベースライン率より少なくとも 10% 大きい場合。
            
        - **B** モデルが予測全体の少なくとも 50% を正確に予測した場合、および解約した顧客の正確な予測の割合がベースラインより最大 10% 大きい場合。
            
        - **C** モデルが予測全体の 50% 未満を正確に予測した場合、または解約した顧客の正確な予測の割合がベースラインより少ない場合。
               
        - **ベースライン** は、モデルの予測時間枠の入力 (たとえば、1 年) を取得し、モデルは、1 か月以下に達するまで 2 で割ることにより、さまざまな時間の割合を作成します。 これらの割合を使用して、この期間に購入していない顧客向けのビジネス ルールを作成します。 これらの顧客は解約されたと見なされます。 誰が解約するかを予測する最も高い能力を持つ時間ベースのビジネス ルールが、ベースライン モデルとして選択されます。
            
    - **離反の可能性 (顧客数)** :離反の予測リスクに基づく顧客のグループ。 このデータは、解約のリスクが高い顧客のセグメントを作成する場合に役立ちます。 このようなセグメントは、セグメント メンバーの停止がどこにあるべきかを理解するのに役立ちます。
       
    - **最も影響力のある要因** :予測を作成する際には、様々な要素が考慮されています。 各因子には、モデルが作成する集計された予測に対して計算された重要度があります。 これらの要素を使用して、予測の結果を検証するか、後でこの情報を使用して顧客の離反リスクに影響を与えうる[セグメントを作成する](segments.md)ことができます。


1. ビジネス アカウントの場合は、**影響力の大きい機能の分析** 情報ページが表示されます。 データの 4 つのセクションが含まれています。

    - 右ペインで選択した項目によって、このページのコンテンツが決まります。 **上位の顧客** または **ベンチマーク顧客** から項目を選択します。 両方のリストは、離反スコアの値が降順で並べられています。スコアが顧客のみの場合でも、顧客の合計スコアであるか、製品カテゴリのようなセカンダリ レベルであるかは関係ありません。
        
        - **上位の顧客** :離反スコアに基づいた、離反のリスクが最も高い/低い 10 件の顧客のリスト。 
        - **ベンチマーク顧客** :モデルの構成中に選択された最大 10 件の顧客のリスト。
 
    - **離反スコア:** 選択した項目の離反スコアを右側のペインに表示します。
    
    - **離反リスクの分布:** 顧客間の離反リスクの分布と、選択した顧客のパーセンタイルを表示します。 
    
    - **離反リスクを増減させる主な機能:** 右側のペインで選択した項目について、離反リスクを増減させた上位 5 つの機能が一覧表示されます。 影響力のあるすべての機能について、そのアイテムの機能の価値と離反スコアへの影響を確認できます。 離反率が低、中、高の顧客セグメント全体の各機能の平均値も表示されます。 これは、選択したアイテムの最も影響力のある機能の値をより適切にコンテキスト化し、それを離反率が低、中、高の顧客セグメントと比較するのに役立ちます。

       - 低: 離反スコアが 0〜0.33 の取引先企業または取引先企業とセカンダリ レベルの組み合わせ
       - 中: 離反スコアが 0.33〜0.66 の取引先企業または取引先企業とセカンダリ レベルの組み合わせ
       - 高: 離反スコアが 0.66 を上回る取引先企業または取引先企業とセカンダリ レベルの組み合わせ
    
       取引先企業レベルで離反を予測する場合、離反セグメントの平均特徴値を導出する際に、すべての取引先企業が考慮されます。 すべての取引先企業のセカンダリ レベルでの離反予測の場合、離反セグメントの導出は、サイド ペインで選択された項目のセカンダリ レベルによって異なります。 たとえば、項目の製品カテゴリ = 事務用品のセカンダリ レベルがある場合、離反セグメントの平均特徴値を導出するときに、製品カテゴリとして事務用品を持つ項目のみが考慮されます。 このロジックは、アイテムの機能値と、低、中、高の離反セグメント全体の平均値との公正な比較を保証するために適用されます。

       上記の定義に基づいて、対応する離反セグメントに属する項目がないため、低、中、または高の離反セグメントの平均値が空であるか、使用できない場合があります。
       
       > [!NOTE]
       > 平均の低、中、高の列下の値の解釈は、国や業界などのカテゴリの特徴によって異なります。 「平均」機能値の概念はカテゴリ機能には適用されないため、これらの列の値は、サイドパネルで選択されたアイテムと比較してカテゴリ機能の値が同じである低、中、または高のチャーン セグメントの顧客の割合です。

---

## <a name="manage-predictions"></a>予測の管理

予測を最適化、トラブルシューティング、更新、または削除することができます。 入力データのユーザビリティ レポートを確認して、予測をより高速で信頼性の高いものにする方法を見つけます。 詳細については、[予測の管理](manage-predictions.md)を参照してください。

[!INCLUDE [footer-include](includes/footer-banner.md)]
